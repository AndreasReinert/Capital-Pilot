<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#080c14">
    <title>Capital-Pilot ‚Äî Wealth Simulation</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
:root {
    --bg-deep: #080c14;
    --bg-panel: rgba(14, 20, 34, 0.85);
    --border-subtle: rgba(255,255,255,0.06);
    --border-hover: rgba(56,189,248,0.3);
    --sky: #38bdf8;
    --emerald: #34d399;
    --amber: #fbbf24;
    --rose: #fb7185;
    --violet: #a78bfa;
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --text-muted: #475569;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'DM Sans',sans-serif;background:var(--bg-deep);color:var(--text-primary);min-height:100vh;overflow-x:hidden;-webkit-tap-highlight-color:transparent;}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(56,189,248,0.012) 1px,transparent 1px),linear-gradient(90deg,rgba(56,189,248,0.012) 1px,transparent 1px);background-size:60px 60px;pointer-events:none;z-index:0;}

.app{position:relative;z-index:1;padding:1rem;max-width:1440px;margin:0 auto;}
@media(min-width:768px){.app{padding:1.5rem;}}

/* Header */
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:0.75rem;}
.header-left{text-align:left;}
.header h1{font-family:‚ÄòJetBrains Mono‚Äô,monospace;font-size:clamp(1.2rem,3.5vw,2.4rem);font-weight:700;letter-spacing:-0.02em;background:linear-gradient(135deg,#e2e8f0 0%,var(‚Äìsky) 50%,var(‚Äìviolet) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;line-height:1.2;}
.header p{color:var(‚Äìtext-muted);font-size:clamp(0.6rem,1.5vw,0.8rem);margin-top:0.15rem;letter-spacing:0.12em;text-transform:uppercase;}

/* Language Picker */
.lang-picker{position:relative;}
.lang-btn{display:flex;align-items:center;gap:0.4rem;background:var(‚Äìbg-panel);border:1px solid var(‚Äìborder-subtle);border-radius:10px;padding:0.5rem 0.75rem;color:var(‚Äìtext-secondary);cursor:pointer;font-family:‚ÄòJetBrains Mono‚Äô,monospace;font-size:0.75rem;transition:all 0.2s;white-space:nowrap;}
.lang-btn:hover{border-color:var(‚Äìsky);color:var(‚Äìsky);}
.lang-btn svg{width:16px;height:16px;stroke:currentColor;fill:none;stroke-width:1.5;}
.lang-dropdown{display:none;position:absolute;top:calc(100% + 6px);right:0;background:rgba(14,20,34,0.98);border:1px solid var(‚Äìborder-subtle);border-radius:12px;padding:0.5rem;z-index:100;max-height:320px;overflow-y:auto;min-width:160px;backdrop-filter:blur(20px);box-shadow:0 20px 60px rgba(0,0,0,0.6);}
.lang-dropdown.open{display:grid;grid-template-columns:1fr 1fr;gap:2px;}
.lang-opt{padding:0.45rem 0.6rem;border-radius:6px;cursor:pointer;font-size:0.72rem;font-family:‚ÄòJetBrains Mono‚Äô,monospace;color:var(‚Äìtext-secondary);transition:all 0.15s;white-space:nowrap;}
.lang-opt:hover{background:rgba(56,189,248,0.1);color:var(‚Äìsky);}
.lang-opt.active{background:rgba(56,189,248,0.15);color:var(‚Äìsky);font-weight:600;}

/* Panels */
.panel{background:var(‚Äìbg-panel);border:1px solid var(‚Äìborder-subtle);border-radius:14px;padding:1.25rem;backdrop-filter:blur(20px);transition:border-color 0.3s;}
@media(min-width:768px){.panel{border-radius:16px;padding:1.5rem;}}
.panel:hover{border-color:var(‚Äìborder-hover);}
.panel-title{font-family:‚ÄòJetBrains Mono‚Äô,monospace;font-size:0.65rem;text-transform:uppercase;letter-spacing:0.18em;color:var(‚Äìtext-muted);margin-bottom:1rem;padding-bottom:0.6rem;border-bottom:1px solid var(‚Äìborder-subtle);}

/* Layout */
.layout{display:flex;flex-direction:column;gap:1rem;}
@media(min-width:1024px){.layout{display:grid;grid-template-columns:340px 1fr;gap:1.5rem;}}
.sidebar{display:flex;flex-direction:column;gap:0.75rem;}
@media(min-width:768px){.sidebar{gap:1rem;}}
.main-area{display:flex;flex-direction:column;gap:0.75rem;}
@media(min-width:768px){.main-area{gap:1rem;}}

/* Params */
.param-group{margin-bottom:0.9rem;}
.param-group:last-child{margin-bottom:0;}
.param-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:0.4rem;}
.param-label{font-size:0.75rem;color:var(‚Äìtext-secondary);font-weight:500;}
.param-value{font-family:‚ÄòJetBrains Mono‚Äô,monospace;font-size:0.75rem;font-weight:700;}
.val-sky{color:var(‚Äìsky);}
.val-emerald{color:var(‚Äìemerald);}
.val-amber{color:var(‚Äìamber);}

input[type=‚Äúrange‚Äù]{-webkit-appearance:none;width:100%;height:6px;border-radius:3px;background:#1e293b;outline:none;cursor:pointer;touch-action:manipulation;}
input[type=‚Äúrange‚Äù]::-webkit-slider-thumb{-webkit-appearance:none;width:22px;height:22px;border-radius:50%;background:var(‚Äìsky);box-shadow:0 0 10px rgba(56,189,248,0.35);cursor:pointer;}
input[type=‚Äúrange‚Äù]::-moz-range-thumb{width:22px;height:22px;border-radius:50%;background:var(‚Äìsky);box-shadow:0 0 10px rgba(56,189,248,0.35);cursor:pointer;border:none;}

/* KPI */
.kpi-grid{display:grid;grid-template-columns:1fr 1fr;gap:0.5rem;}
@media(min-width:768px){.kpi-grid{grid-template-columns:repeat(4,1fr);gap:0.75rem;}}
.kpi-card{background:var(‚Äìbg-panel);border:1px solid var(‚Äìborder-subtle);border-radius:10px;padding:0.9rem 0.7rem;text-align:center;transition:border-color 0.3s;}
@media(min-width:768px){.kpi-card{border-radius:12px;padding:1.25rem 1rem;}}
.kpi-card.accent-sky{border-left:3px solid var(‚Äìsky);}
.kpi-card.accent-emerald{border-left:3px solid var(‚Äìemerald);}
.kpi-card.accent-amber{border-left:3px solid var(‚Äìamber);}
.kpi-card.accent-violet{border-left:3px solid var(‚Äìviolet);}
.kpi-label{font-size:0.58rem;text-transform:uppercase;letter-spacing:0.12em;color:var(‚Äìtext-muted);margin-bottom:0.35rem;}
@media(min-width:768px){.kpi-label{font-size:0.65rem;letter-spacing:0.15em;}}
.kpi-value{font-family:‚ÄòJetBrains Mono‚Äô,monospace;font-size:clamp(1.1rem,3vw,1.6rem);font-weight:700;line-height:1;}
.kpi-unit{font-size:0.6rem;color:var(‚Äìtext-secondary);margin-top:0.2rem;}
@media(min-width:768px){.kpi-unit{font-size:0.7rem;margin-top:0.3rem;}}
.kpi-sub{font-size:0.55rem;color:var(‚Äìtext-muted);margin-top:0.15rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
@media(min-width:768px){.kpi-sub{font-size:0.65rem;}}

/* Chart */
.chart-container{position:relative;height:280px;width:100%;}
@media(min-width:768px){.chart-container{height:400px;}}
@media(min-width:1200px){.chart-container{height:440px;}}

/* Allocation bar */
.alloc-bar{display:flex;height:8px;border-radius:4px;overflow:hidden;margin-top:0.75rem;gap:2px;}
.alloc-seg{transition:width 0.4s ease;border-radius:2px;}
.alloc-labels{display:flex;justify-content:space-between;margin-top:0.5rem;font-size:0.6rem;color:var(‚Äìtext-muted);}
@media(min-width:768px){.alloc-labels{font-size:0.65rem;}}

/* Stats */
.stats-grid{display:grid;grid-template-columns:1fr;gap:0.5rem;}
@media(min-width:768px){.stats-grid{grid-template-columns:1fr 1fr;gap:1rem;}}
.stat-row{display:flex;justify-content:space-between;padding:0.4rem 0;border-bottom:1px solid var(‚Äìborder-subtle);font-size:0.72rem;gap:0.5rem;}
@media(min-width:768px){.stat-row{font-size:0.8rem;padding:0.5rem 0;}}
.stat-label{color:var(‚Äìtext-muted);flex-shrink:1;min-width:0;}
.stat-val{font-family:‚ÄòJetBrains Mono‚Äô,monospace;font-weight:600;color:var(‚Äìtext-primary);white-space:nowrap;}

/* Health */
.health-bar{width:100%;height:6px;background:#1e293b;border-radius:3px;overflow:hidden;}
.health-fill{height:100%;border-radius:3px;transition:width 0.5s ease,background 0.3s;}
.health-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem;}

/* Warning & Info */
.warning-box{background:rgba(251,113,133,0.08);border:1px solid rgba(251,113,133,0.2);border-radius:10px;padding:0.85rem;font-size:0.72rem;color:var(‚Äìrose);display:none;line-height:1.5;}
.warning-box.active{display:block;}
.info-box{background:rgba(56,189,248,0.05);border:1px solid rgba(56,189,248,0.1);border-radius:10px;padding:0.85rem;font-size:0.7rem;color:var(‚Äìtext-secondary);line-height:1.6;}

/* Button */
.btn-sim{font-family:‚ÄòJetBrains Mono‚Äô,monospace;font-size:0.65rem;text-transform:uppercase;letter-spacing:0.1em;background:transparent;border:1px solid var(‚Äìborder-subtle);color:var(‚Äìtext-secondary);padding:0.45rem 0.7rem;border-radius:8px;cursor:pointer;transition:all 0.2s;white-space:nowrap;}
.btn-sim:hover,.btn-sim:active{border-color:var(‚Äìsky);color:var(‚Äìsky);}

/* Legend */
.legend-row{display:flex;flex-wrap:wrap;gap:0.5rem 0.8rem;justify-content:center;margin-top:0.6rem;}
@media(min-width:768px){.legend-row{gap:0.6rem 1rem;margin-top:0.75rem;}}
.legend-item{display:flex;align-items:center;gap:0.3rem;font-size:0.6rem;color:var(‚Äìtext-muted);}
@media(min-width:768px){.legend-item{font-size:0.7rem;gap:0.4rem;}}
.legend-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;}
@media(min-width:768px){.legend-dot{width:10px;height:10px;}}
.legend-stripe{width:8px;height:8px;border-radius:2px;background:rgba(251,113,133,0.15);border:1px solid rgba(251,113,133,0.4);flex-shrink:0;}

.divider{height:1px;background:var(‚Äìborder-subtle);margin:0.6rem 0;}

/* Crisis timeline labels */
.crisis-labels{display:flex;flex-wrap:wrap;gap:0.3rem;margin-top:0.5rem;justify-content:center;}
.crisis-tag{font-family:‚ÄòJetBrains Mono‚Äô,monospace;font-size:0.55rem;padding:0.2rem 0.45rem;border-radius:4px;background:rgba(251,113,133,0.1);color:var(‚Äìrose);border:1px solid rgba(251,113,133,0.2);white-space:nowrap;}
@media(min-width:768px){.crisis-tag{font-size:0.6rem;padding:0.25rem 0.5rem;}}

/* Scrollbar */
::-webkit-scrollbar{width:4px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:var(‚Äìtext-muted);border-radius:2px;}
</style>

</head>
<body>
<div class="app">

```
<!-- HEADER -->
<div class="header">
    <div class="header-left">
        <h1 data-i18n="title">Financial Fortress</h1>
        <p data-i18n="subtitle">Strategic Withdrawal Simulation</p>
    </div>
    <div class="lang-picker">
        <button class="lang-btn" id="langBtn" onclick="toggleLangDropdown()">
            <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10A15.3 15.3 0 0 1 12 2z"/></svg>
            <span id="langLabel">EN</span>
        </button>
        <div class="lang-dropdown" id="langDropdown"></div>
    </div>
</div>

<div class="layout">
    <!-- SIDEBAR -->
    <div class="sidebar">
        <div class="panel">
            <div class="panel-title" data-i18n="baseParams">Base Parameters</div>
            <div class="param-group">
                <div class="param-header">
                    <span class="param-label" data-i18n="startCapital">Starting Capital</span>
                    <span class="param-value val-sky" id="val-capital">1'983'000 CHF</span>
                </div>
                <input type="range" id="in-capital" min="300000" max="5000000" step="10000" value="1983000">
            </div>
            <div class="param-group">
                <div class="param-header">
                    <span class="param-label" data-i18n="duration">Withdrawal Duration</span>
                    <span class="param-value val-sky" id="val-years">30 Years</span>
                </div>
                <input type="range" id="in-years" min="10" max="50" step="1" value="30">
            </div>
            <div class="param-group">
                <div class="param-header">
                    <span class="param-label" data-i18n="targetLegacy">Target Legacy</span>
                    <span class="param-value val-sky" id="val-legacy">500'000 CHF</span>
                </div>
                <input type="range" id="in-legacy" min="0" max="3000000" step="25000" value="500000">
            </div>
            <div class="param-group">
                <div class="param-header">
                    <span class="param-label" data-i18n="inflation">Inflation (% p.a.)</span>
                    <span class="param-value val-amber" id="val-inflation">2.0 %</span>
                </div>
                <input type="range" id="in-inflation" min="0" max="5" step="0.1" value="2.0">
            </div>

            <div class="divider"></div>
            <div class="panel-title" data-i18n="marketStrategy">Market & Strategy</div>

            <div class="param-group">
                <div class="param-header">
                    <span class="param-label" data-i18n="expectedReturn">Expected Return (% p.a.)</span>
                    <span class="param-value val-emerald" id="val-growth">7.0 %</span>
                </div>
                <input type="range" id="in-growth" min="2" max="12" step="0.1" value="7.0">
            </div>
            <div class="param-group">
                <div class="param-header">
                    <span class="param-label" data-i18n="warChest">War Chest (%)</span>
                    <span class="param-value val-amber" id="val-warchest">16.8 %</span>
                </div>
                <input type="range" id="in-warchest" min="0" max="35" step="0.5" value="16.8">
            </div>
            <div class="param-group">
                <div class="param-header">
                    <span class="param-label" data-i18n="cashBuffer">Cash Buffer (Years)</span>
                    <span class="param-value val-emerald" id="val-buffer">3.0</span>
                </div>
                <input type="range" id="in-buffer" min="0" max="5" step="0.5" value="3">
            </div>
            <div class="param-group">
                <div class="param-header">
                    <span class="param-label" data-i18n="pension">Pension (monthly)</span>
                    <span class="param-value val-emerald" id="val-ahv">1'500 CHF</span>
                </div>
                <input type="range" id="in-ahv" min="0" max="8000" step="100" value="1500">
            </div>
        </div>

        <!-- Allocation -->
        <div class="panel">
            <div class="panel-title" data-i18n="allocation">Capital Allocation</div>
            <div class="alloc-bar" id="alloc-bar"></div>
            <div class="alloc-labels">
                <span>ETF: <span id="alloc-etf" style="color:var(--sky)">‚Äî</span></span>
                <span><span data-i18n="bufferShort">Buffer</span>: <span id="alloc-buf" style="color:var(--emerald)">‚Äî</span></span>
                <span><span data-i18n="warShort">War</span>: <span id="alloc-war" style="color:var(--amber)">‚Äî</span></span>
            </div>
        </div>

        <div class="warning-box" id="warning-box"></div>
    </div>

    <!-- MAIN -->
    <div class="main-area">
        <!-- KPI -->
        <div class="kpi-grid">
            <div class="kpi-card accent-sky">
                <div class="kpi-label" data-i18n="monthlyBudget">Monthly Budget</div>
                <div class="kpi-value" id="kpi-monthly" style="color:var(--sky)">‚Äî</div>
                <div class="kpi-unit">CHF / <span data-i18n="month">month</span></div>
                <div class="kpi-sub" id="kpi-monthly-sub"></div>
            </div>
            <div class="kpi-card accent-emerald">
                <div class="kpi-label" data-i18n="cashBufferLabel">Cash Buffer</div>
                <div class="kpi-value" id="kpi-buffer" style="color:var(--emerald)">‚Äî</div>
                <div class="kpi-unit" data-i18n="chfSafety">CHF Safety</div>
                <div class="kpi-sub" id="kpi-buffer-months"></div>
            </div>
            <div class="kpi-card accent-amber">
                <div class="kpi-label" data-i18n="warChestLabel">War Chest</div>
                <div class="kpi-value" id="kpi-warchest" style="color:var(--amber)">‚Äî</div>
                <div class="kpi-unit" data-i18n="chfCrash">CHF for Crashes</div>
            </div>
            <div class="kpi-card accent-violet">
                <div class="kpi-label" data-i18n="purchasingPower">Purchasing Power</div>
                <div class="kpi-value" id="kpi-real" style="color:var(--violet)">‚Äî</div>
                <div class="kpi-unit" data-i18n="chfReal">CHF real (today)</div>
                <div class="kpi-sub" id="kpi-real-sub"></div>
            </div>
        </div>

        <!-- Health -->
        <div class="panel">
            <div class="health-row">
                <div class="panel-title" style="margin:0;border:none;padding:0" data-i18n="strategyHealth">Strategy Health</div>
                <span id="health-label" style="font-family:'JetBrains Mono';font-size:0.7rem;font-weight:700;color:var(--emerald)">Robust</span>
            </div>
            <div class="health-bar"><div class="health-fill" id="health-fill" style="width:80%;background:var(--emerald)"></div></div>
            <div style="display:flex;justify-content:space-between;margin-top:0.3rem;font-size:0.55rem;color:var(--text-muted)">
                <span data-i18n="fragile">Fragile</span><span data-i18n="stable">Stable</span><span data-i18n="robust">Robust</span>
            </div>
        </div>

        <!-- Chart -->
        <div class="panel">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.6rem;gap:0.5rem;flex-wrap:wrap;">
                <div class="panel-title" style="margin:0;border:none;padding:0">
                    <span data-i18n="historicalSim">Historical Simulation</span> ¬∑ <span id="lbl-years" style="color:var(--sky)">30</span> <span data-i18n="yearsShort">Years</span>
                </div>
                <div style="display:flex;gap:0.4rem;flex-wrap:wrap;">
                    <button class="btn-sim" onclick="shiftTimeline(-5)" title="Earlier">‚Üê 5Y</button>
                    <button class="btn-sim" onclick="shiftTimeline(5)" title="Later">5Y ‚Üí</button>
                    <button class="btn-sim" onclick="recalc()">‚Üª</button>
                </div>
            </div>
            <div style="text-align:center;margin-bottom:0.4rem;">
                <span style="font-family:'JetBrains Mono';font-size:0.7rem;color:var(--text-muted);" id="timeline-label">1995 ‚Äî 2025</span>
            </div>
            <div class="chart-container">
                <canvas id="mainChart"></canvas>
            </div>
            <div class="legend-row">
                <div class="legend-item"><div class="legend-dot" style="background:var(--sky)"></div> <span data-i18n="etfDepot">ETF Depot</span></div>
                <div class="legend-item"><div class="legend-dot" style="background:var(--emerald)"></div> <span data-i18n="bufferShort">Buffer</span></div>
                <div class="legend-item"><div class="legend-dot" style="background:var(--amber)"></div> <span data-i18n="warShort">War Chest</span></div>
                <div class="legend-item"><div class="legend-dot" style="background:var(--rose);opacity:0.5"></div> <span data-i18n="totalWealth">Total</span></div>
                <div class="legend-item"><div class="legend-stripe"></div> <span data-i18n="crisisPhase">Crisis</span></div>
            </div>
            <div class="crisis-labels" id="crisis-tags"></div>
        </div>

        <!-- Stats -->
        <div class="panel">
            <div class="panel-title" data-i18n="withdrawalAnalysis">Withdrawal Analysis</div>
            <div class="stats-grid">
                <div>
                    <div class="stat-row"><span class="stat-label" data-i18n="totalWithdrawal">Total Withdrawal</span><span class="stat-val" id="stat-total-out">‚Äî</span></div>
                    <div class="stat-row"><span class="stat-label" data-i18n="capitalUsed">Capital Used</span><span class="stat-val" id="stat-capital-used">‚Äî</span></div>
                    <div class="stat-row"><span class="stat-label" style="color:var(--emerald)" data-i18n="marketGain">Market Gain</span><span class="stat-val" style="color:var(--emerald)" id="stat-market-gain">‚Äî</span></div>
                    <div class="stat-row"><span class="stat-label">SWR</span><span class="stat-val" id="stat-swr">‚Äî</span></div>
                </div>
                <div>
                    <div class="stat-row"><span class="stat-label" data-i18n="endWealth">End Wealth (Sim)</span><span class="stat-val" id="stat-end-value">‚Äî</span></div>
                    <div class="stat-row"><span class="stat-label" data-i18n="worstDepot">Worst Depot Value</span><span class="stat-val" id="stat-worst">‚Äî</span></div>
                    <div class="stat-row"><span class="stat-label" data-i18n="crisesSurvived">Crises Survived</span><span class="stat-val" id="stat-crises">‚Äî</span></div>
                    <div class="stat-row"><span class="stat-label" data-i18n="bufferMonths">Buffer Months Used</span><span class="stat-val" id="stat-buffer-used">‚Äî</span></div>
                </div>
            </div>
        </div>

        <div class="info-box">
            <strong style="color:var(--sky)">v4:</strong>
            <span data-i18n="methodInfo">Historical crisis overlay (1975‚Äì2025) with real events: Oil Crisis, Black Monday, Dotcom, GFC, COVID, 2022 Bear. Shift the timeline to see how early/late crises affect your plan. Newton-Raphson solver, inflation-adjusted withdrawals, dynamic reduction on drawdowns.</span>
        </div>
    </div>
</div>
```

</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// i18n ‚Äî 21 Languages
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const LANGS = {
en:{code:'EN',name:'English',
    title:'Financial Fortress',subtitle:'Strategic Withdrawal Simulation',
    baseParams:'Base Parameters',startCapital:'Starting Capital',duration:'Withdrawal Duration',
    targetLegacy:'Target Legacy',inflation:'Inflation (% p.a.)',marketStrategy:'Market & Strategy',
    expectedReturn:'Expected Return (% p.a.)',warChest:'War Chest (%)',cashBuffer:'Cash Buffer (Years)',
    pension:'Pension (monthly)',allocation:'Capital Allocation',bufferShort:'Buffer',warShort:'War',
    monthlyBudget:'Monthly Budget',month:'month',cashBufferLabel:'Cash Buffer',chfSafety:'CHF Safety',
    warChestLabel:'War Chest',chfCrash:'CHF for Crashes',purchasingPower:'Purchasing Power',
    chfReal:'CHF real (today)',strategyHealth:'Strategy Health',fragile:'Fragile',stable:'Stable',
    robust:'Robust',moderate:'Moderate',historicalSim:'Historical Simulation',yearsShort:'Years',
    etfDepot:'ETF Depot',totalWealth:'Total',crisisPhase:'Crisis',
    withdrawalAnalysis:'Withdrawal Analysis',totalWithdrawal:'Total Withdrawal (nominal)',
    capitalUsed:'Capital Used',marketGain:'Market Gain (Interest)',endWealth:'End Wealth (Sim)',
    worstDepot:'Worst Depot Value',crisesSurvived:'Crises Survived',bufferMonths:'Buffer Months Used',
    yearsUnit:'Years',monthsUnit:'months',monthsCoverage:'months coverage',
    inclPension:'incl. pension',bearMarkets:'bear markets',
    warnLowETF:'‚ö† Less than 15% in ETF ‚Äî minimal growth potential.',
    warnNoETF:'üö´ No capital for ETF! Reduce buffer or war chest.',
    warnNegative:'üö´ No positive withdrawal possible with these parameters.',
    warnHighSWR:'‚ö† Withdrawal rate {0}% ‚Äî above the 4% rule. Higher risk.',
    warnHighLegacy:'‚ö† Target legacy > 60% of capital ‚Äî limited withdrawal room.',
    methodInfo:'Historical crisis overlay (1975‚Äì2025) with real events: Oil Crisis, Black Monday, Dotcom, GFC, COVID, 2022 Bear. Shift the timeline to see how early/late crises affect your plan. Newton-Raphson solver, inflation-adjusted withdrawals, dynamic reduction on drawdowns.',
    nominalEq:'nominal = {0} real',
},
de:{code:'DE',name:'Deutsch',
    title:'Finanz Festung',subtitle:'Strategische Entnahme-Simulation',
    baseParams:'Basis-Parameter',startCapital:'Startkapital',duration:'Entnahme-Dauer',
    targetLegacy:'Ziel-Erbe',inflation:'Inflation (% p.a.)',marketStrategy:'Markt & Strategie',
    expectedReturn:'Erwartete Rendite (% p.a.)',warChest:'Kriegskasse (%)',cashBuffer:'Cash-Puffer (Jahre)',
    pension:'Rente AHV/PK (mtl.)',allocation:'Kapital-Aufteilung',bufferShort:'Puffer',warShort:'Krieg',
    monthlyBudget:'Monats-Budget',month:'Monat',cashBufferLabel:'Cash-Puffer',chfSafety:'CHF Sicherheit',
    warChestLabel:'Kriegskasse',chfCrash:'CHF f√ºr Crashs',purchasingPower:'Kaufkraft',
    chfReal:'CHF real (heute)',strategyHealth:'Strategie-Gesundheit',fragile:'Fragil',stable:'Stabil',
    robust:'Robust',moderate:'M√§ssig',historicalSim:'Historische Simulation',yearsShort:'Jahre',
    etfDepot:'ETF-Depot',totalWealth:'Gesamt',crisisPhase:'Krise',
    withdrawalAnalysis:'Auszahlungs-Analyse',totalWithdrawal:'Gesamte Entnahme (nominal)',
    capitalUsed:'Davon Eigenkapital',marketGain:'Markt-Ertrag (Zinsen)',endWealth:'Endverm√∂gen (Sim)',
    worstDepot:'Tiefster Depotwert',crisesSurvived:'Krisen durchlebt',bufferMonths:'Puffer-Monate genutzt',
    yearsUnit:'Jahre',monthsUnit:'Monate',monthsCoverage:'Monate Deckung',
    inclPension:'inkl. Rente',bearMarkets:'B√§renm√§rkte',
    warnLowETF:'‚ö† Weniger als 15% im ETF ‚Äî kaum Wachstum.',
    warnNoETF:'üö´ Kein Kapital f√ºr ETF! Reduziere Puffer oder Kriegskasse.',
    warnNegative:'üö´ Keine positive Entnahme mit diesen Parametern m√∂glich.',
    warnHighSWR:'‚ö† Entnahme-Rate {0}% ‚Äî √ºber der 4%-Regel. H√∂heres Risiko.',
    warnHighLegacy:'‚ö† Ziel-Erbe > 60% des Kapitals ‚Äî wenig Entnahme-Spielraum.',
    methodInfo:'Historische Krisen-√úberlagerung (1975‚Äì2025) mit realen Events: √ñlkrise, Black Monday, Dotcom, Finanzkrise, COVID, 2022-B√§renmarkt. Timeline verschieben um den Effekt fr√ºher/sp√§ter Krisen zu sehen.',
    nominalEq:'nominal = {0} real',
},
fr:{code:'FR',name:'Fran√ßais',
    title:'Forteresse Financi√®re',subtitle:'Simulation de Retrait Strat√©gique',
    baseParams:'Param√®tres de base',startCapital:'Capital initial',duration:'Dur√©e de retrait',
    targetLegacy:'H√©ritage cible',inflation:'Inflation (% p.a.)',marketStrategy:'March√© & Strat√©gie',
    expectedReturn:'Rendement attendu (% p.a.)',warChest:'R√©serve de guerre (%)',cashBuffer:'Tampon Cash (Ann√©es)',
    pension:'Retraite (mensuel)',allocation:'Allocation du capital',bufferShort:'Tampon',warShort:'Guerre',
    monthlyBudget:'Budget Mensuel',month:'mois',cashBufferLabel:'Tampon Cash',chfSafety:'CHF S√©curit√©',
    warChestLabel:'R√©serve de Guerre',chfCrash:'CHF pour Crashs',purchasingPower:'Pouvoir d\'achat',
    chfReal:'CHF r√©el (auj.)',strategyHealth:'Sant√© de la Strat√©gie',fragile:'Fragile',stable:'Stable',
    robust:'Robuste',moderate:'Mod√©r√©',historicalSim:'Simulation Historique',yearsShort:'Ans',
    etfDepot:'D√©p√¥t ETF',totalWealth:'Total',crisisPhase:'Crise',
    withdrawalAnalysis:'Analyse des Retraits',totalWithdrawal:'Retrait total (nominal)',
    capitalUsed:'Capital utilis√©',marketGain:'Gain du march√©',endWealth:'Patrimoine final',
    worstDepot:'Pire valeur d√©p√¥t',crisesSurvived:'Crises travers√©es',bufferMonths:'Mois tampon utilis√©s',
    yearsUnit:'Ans',monthsUnit:'mois',monthsCoverage:'mois couverture',
    inclPension:'incl. retraite',bearMarkets:'march√©s baissiers',
    warnLowETF:'‚ö† Moins de 15% en ETF.',warnNoETF:'üö´ Pas de capital ETF!',
    warnNegative:'üö´ Retrait impossible.',warnHighSWR:'‚ö† Taux {0}% ‚Äî au-dessus de la r√®gle des 4%.',
    warnHighLegacy:'‚ö† H√©ritage > 60% du capital.',
    methodInfo:'Crises historiques (1975‚Äì2025): Choc p√©trolier, Black Monday, Dotcom, Crise financi√®re, COVID, 2022.',
    nominalEq:'nominal = {0} r√©el',
},
es:{code:'ES',name:'Espa√±ol',
    title:'Fortaleza Financiera',subtitle:'Simulaci√≥n de Retiro Estrat√©gico',
    baseParams:'Par√°metros Base',startCapital:'Capital Inicial',duration:'Duraci√≥n de Retiro',
    targetLegacy:'Herencia Objetivo',inflation:'Inflaci√≥n (% p.a.)',marketStrategy:'Mercado y Estrategia',
    expectedReturn:'Rendimiento Esperado (% p.a.)',warChest:'Reserva de Guerra (%)',cashBuffer:'Colch√≥n de Efectivo (A√±os)',
    pension:'Pensi√≥n (mensual)',allocation:'Asignaci√≥n de Capital',bufferShort:'Colch√≥n',warShort:'Guerra',
    monthlyBudget:'Presupuesto Mensual',month:'mes',cashBufferLabel:'Colch√≥n de Efectivo',chfSafety:'CHF Seguridad',
    warChestLabel:'Reserva de Guerra',chfCrash:'CHF para Crisis',purchasingPower:'Poder Adquisitivo',
    chfReal:'CHF real (hoy)',strategyHealth:'Salud de la Estrategia',fragile:'Fr√°gil',stable:'Estable',
    robust:'Robusto',moderate:'Moderado',historicalSim:'Simulaci√≥n Hist√≥rica',yearsShort:'A√±os',
    etfDepot:'Dep√≥sito ETF',totalWealth:'Total',crisisPhase:'Crisis',
    withdrawalAnalysis:'An√°lisis de Retiros',totalWithdrawal:'Retiro total (nominal)',
    capitalUsed:'Capital utilizado',marketGain:'Ganancia del mercado',endWealth:'Patrimonio final',
    worstDepot:'Peor valor dep√≥sito',crisesSurvived:'Crisis superadas',bufferMonths:'Meses colch√≥n usados',
    yearsUnit:'A√±os',monthsUnit:'meses',monthsCoverage:'meses cobertura',
    inclPension:'incl. pensi√≥n',bearMarkets:'mercados bajistas',
    warnLowETF:'‚ö† Menos del 15% en ETF.',warnNoETF:'üö´ Sin capital para ETF!',
    warnNegative:'üö´ Retiro imposible.',warnHighSWR:'‚ö† Tasa {0}% ‚Äî sobre la regla del 4%.',
    warnHighLegacy:'‚ö† Herencia > 60% del capital.',
    methodInfo:'Crisis hist√≥ricas (1975‚Äì2025): Crisis del petr√≥leo, Black Monday, Dotcom, Crisis financiera, COVID, 2022.',
    nominalEq:'nominal = {0} real',
},
it:{code:'IT',name:'Italiano',
    title:'Fortezza Finanziaria',subtitle:'Simulazione di Prelievo Strategico',
    baseParams:'Parametri Base',startCapital:'Capitale Iniziale',duration:'Durata del Prelievo',
    targetLegacy:'Eredit√† Obiettivo',inflation:'Inflazione (% p.a.)',marketStrategy:'Mercato e Strategia',
    expectedReturn:'Rendimento Atteso (% p.a.)',warChest:'Riserva di Guerra (%)',cashBuffer:'Cuscinetto Cash (Anni)',
    pension:'Pensione (mensile)',allocation:'Allocazione Capitale',bufferShort:'Cuscinetto',warShort:'Guerra',
    monthlyBudget:'Budget Mensile',month:'mese',cashBufferLabel:'Cuscinetto Cash',chfSafety:'CHF Sicurezza',
    warChestLabel:'Riserva di Guerra',chfCrash:'CHF per Crash',purchasingPower:'Potere d\'Acquisto',
    chfReal:'CHF reale (oggi)',strategyHealth:'Salute della Strategia',fragile:'Fragile',stable:'Stabile',
    robust:'Robusto',moderate:'Moderato',historicalSim:'Simulazione Storica',yearsShort:'Anni',
    etfDepot:'Deposito ETF',totalWealth:'Totale',crisisPhase:'Crisi',
    withdrawalAnalysis:'Analisi Prelievi',totalWithdrawal:'Prelievo totale',capitalUsed:'Capitale usato',
    marketGain:'Guadagno mercato',endWealth:'Patrimonio finale',worstDepot:'Peggiore valore deposito',
    crisesSurvived:'Crisi superate',bufferMonths:'Mesi cuscinetto usati',
    yearsUnit:'Anni',monthsUnit:'mesi',monthsCoverage:'mesi copertura',
    inclPension:'incl. pensione',bearMarkets:'mercati ribassisti',
    warnLowETF:'‚ö† Meno del 15% in ETF.',warnNoETF:'üö´ Nessun capitale ETF!',
    warnNegative:'üö´ Prelievo impossibile.',warnHighSWR:'‚ö† Tasso {0}% ‚Äî sopra la regola del 4%.',
    warnHighLegacy:'‚ö† Eredit√† > 60% del capitale.',
    methodInfo:'Crisi storiche (1975‚Äì2025): Crisi petrolifera, Black Monday, Dotcom, Crisi finanziaria, COVID, 2022.',
    nominalEq:'nominale = {0} reale',
},
pt:{code:'PT',name:'Portugu√™s',title:'Fortaleza Financeira',subtitle:'Simula√ß√£o de Retirada Estrat√©gica',baseParams:'Par√¢metros Base',startCapital:'Capital Inicial',duration:'Dura√ß√£o da Retirada',targetLegacy:'Heran√ßa Alvo',inflation:'Infla√ß√£o (% a.a.)',marketStrategy:'Mercado e Estrat√©gia',expectedReturn:'Retorno Esperado (% a.a.)',warChest:'Reserva de Guerra (%)',cashBuffer:'Colch√£o de Caixa (Anos)',pension:'Pens√£o (mensal)',allocation:'Aloca√ß√£o de Capital',bufferShort:'Colch√£o',warShort:'Guerra',monthlyBudget:'Or√ßamento Mensal',month:'m√™s',cashBufferLabel:'Colch√£o de Caixa',chfSafety:'CHF Seguran√ßa',warChestLabel:'Reserva de Guerra',chfCrash:'CHF para Crashes',purchasingPower:'Poder de Compra',chfReal:'CHF real (hoje)',strategyHealth:'Sa√∫de da Estrat√©gia',fragile:'Fr√°gil',stable:'Est√°vel',robust:'Robusto',moderate:'Moderado',historicalSim:'Simula√ß√£o Hist√≥rica',yearsShort:'Anos',etfDepot:'Dep√≥sito ETF',totalWealth:'Total',crisisPhase:'Crise',withdrawalAnalysis:'An√°lise de Retiradas',totalWithdrawal:'Retirada total',capitalUsed:'Capital usado',marketGain:'Ganho do mercado',endWealth:'Patrim√¥nio final',worstDepot:'Pior valor dep√≥sito',crisesSurvived:'Crises superadas',bufferMonths:'Meses colch√£o usados',yearsUnit:'Anos',monthsUnit:'meses',monthsCoverage:'meses cobertura',inclPension:'incl. pens√£o',bearMarkets:'mercados em baixa',warnLowETF:'‚ö† Menos de 15% em ETF.',warnNoETF:'üö´ Sem capital ETF!',warnNegative:'üö´ Retirada imposs√≠vel.',warnHighSWR:'‚ö† Taxa {0}% ‚Äî acima da regra dos 4%.',warnHighLegacy:'‚ö† Heran√ßa > 60% do capital.',methodInfo:'Crises hist√≥ricas (1975‚Äì2025).',nominalEq:'nominal = {0} real'},
nl:{code:'NL',name:'Nederlands',title:'Financieel Fort',subtitle:'Strategische Onttrekkingssimulatie',baseParams:'Basisparameters',startCapital:'Startkapitaal',duration:'Onttrekkingsduur',targetLegacy:'Doelerfenis',inflation:'Inflatie (% p.j.)',marketStrategy:'Markt & Strategie',expectedReturn:'Verwacht Rendement (% p.j.)',warChest:'Oorlogskas (%)',cashBuffer:'Cash Buffer (Jaren)',pension:'Pensioen (maandelijks)',allocation:'Kapitaalallocatie',bufferShort:'Buffer',warShort:'Oorlog',monthlyBudget:'Maandbudget',month:'maand',cashBufferLabel:'Cash Buffer',chfSafety:'CHF Veiligheid',warChestLabel:'Oorlogskas',chfCrash:'CHF voor Crashes',purchasingPower:'Koopkracht',chfReal:'CHF re√´el (nu)',strategyHealth:'Strategiegezondheid',fragile:'Fragiel',stable:'Stabiel',robust:'Robuust',moderate:'Matig',historicalSim:'Historische Simulatie',yearsShort:'Jaar',etfDepot:'ETF Depot',totalWealth:'Totaal',crisisPhase:'Crisis',withdrawalAnalysis:'Onttrekkingsanalyse',totalWithdrawal:'Totale onttrekking',capitalUsed:'Kapitaal gebruikt',marketGain:'Marktwinst',endWealth:'Eindvermogen',worstDepot:'Laagste depotwaarde',crisesSurvived:'Crises overleefd',bufferMonths:'Buffermaanden gebruikt',yearsUnit:'Jaar',monthsUnit:'maanden',monthsCoverage:'maanden dekking',inclPension:'incl. pensioen',bearMarkets:'berenmarkten',warnLowETF:'‚ö† Minder dan 15% in ETF.',warnNoETF:'üö´ Geen ETF kapitaal!',warnNegative:'üö´ Onttrekking onmogelijk.',warnHighSWR:'‚ö† Tarief {0}% ‚Äî boven de 4%-regel.',warnHighLegacy:'‚ö† Erfenis > 60% van kapitaal.',methodInfo:'Historische crises (1975‚Äì2025).',nominalEq:'nominaal = {0} re√´el'},
pl:{code:'PL',name:'Polski',title:'Finansowa Twierdza',subtitle:'Symulacja Strategiczna Wyp≈Çat',baseParams:'Parametry bazowe',startCapital:'Kapita≈Ç poczƒÖtkowy',duration:'Okres wyp≈Çat',targetLegacy:'Docelowy spadek',inflation:'Inflacja (% r.r.)',marketStrategy:'Rynek i Strategia',expectedReturn:'Oczekiwany zwrot (% r.r.)',warChest:'Rezerwa wojenna (%)',cashBuffer:'Bufor got√≥wkowy (Lata)',pension:'Emerytura (mies.)',allocation:'Alokacja kapita≈Çu',bufferShort:'Bufor',warShort:'Rez.',monthlyBudget:'Bud≈ºet miesiƒôczny',month:'miesiƒÖc',cashBufferLabel:'Bufor got√≥wkowy',chfSafety:'CHF Bezp.',warChestLabel:'Rezerwa wojenna',chfCrash:'CHF na kryzysy',purchasingPower:'Si≈Ça nabywcza',chfReal:'CHF realne (dzi≈õ)',strategyHealth:'Zdrowie strategii',fragile:'Krucha',stable:'Stabilna',robust:'Solidna',moderate:'Umiarkowana',historicalSim:'Symulacja historyczna',yearsShort:'Lat',etfDepot:'Depozyt ETF',totalWealth:'Razem',crisisPhase:'Kryzys',withdrawalAnalysis:'Analiza wyp≈Çat',totalWithdrawal:'≈ÅƒÖczna wyp≈Çata',capitalUsed:'U≈ºyty kapita≈Ç',marketGain:'Zysk rynkowy',endWealth:'MajƒÖtek ko≈Ñcowy',worstDepot:'Najgorszy depozyt',crisesSurvived:'Prze≈ºyte kryzysy',bufferMonths:'MiesiƒÖce bufora',yearsUnit:'Lat',monthsUnit:'miesiƒôcy',monthsCoverage:'mies. pokrycia',inclPension:'z emeryturƒÖ',bearMarkets:'bessy',warnLowETF:'‚ö† Poni≈ºej 15% w ETF.',warnNoETF:'üö´ Brak kapita≈Çu ETF!',warnNegative:'üö´ Wyp≈Çata niemo≈ºliwa.',warnHighSWR:'‚ö† Stopa {0}% ‚Äî powy≈ºej 4%.',warnHighLegacy:'‚ö† Spadek > 60% kapita≈Çu.',methodInfo:'Kryzysy historyczne (1975‚Äì2025).',nominalEq:'nominalnie = {0} realnie'},
ru:{code:'RU',name:'–†—É—Å—Å–∫–∏–π',title:'–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ö—Ä–µ–ø–æ—Å—Ç—å',subtitle:'–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è —Å–∏–º—É–ª—è—Ü–∏—è —Å–Ω—è—Ç–∏—è —Å—Ä–µ–¥—Å—Ç–≤',baseParams:'–ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã',startCapital:'–ù–∞—á–∞–ª—å–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª',duration:'–°—Ä–æ–∫ —Å–Ω—è—Ç–∏—è',targetLegacy:'–¶–µ–ª–µ–≤–æ–µ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–æ',inflation:'–ò–Ω—Ñ–ª—è—Ü–∏—è (% –≥.)',marketStrategy:'–†—ã–Ω–æ–∫ –∏ –°—Ç—Ä–∞—Ç–µ–≥–∏—è',expectedReturn:'–û–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (% –≥.)',warChest:'–†–µ–∑–µ—Ä–≤ (%)',cashBuffer:'–ö—ç—à-–±—É—Ñ–µ—Ä (–ì–æ–¥—ã)',pension:'–ü–µ–Ω—Å–∏—è (–º–µ—Å.)',allocation:'–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–∞',bufferShort:'–ë—É—Ñ–µ—Ä',warShort:'–†–µ–∑–µ—Ä–≤',monthlyBudget:'–ú–µ—Å—è—á–Ω—ã–π –±—é–¥–∂–µ—Ç',month:'–º–µ—Å',cashBufferLabel:'–ö—ç—à-–±—É—Ñ–µ—Ä',chfSafety:'CHF –ë–µ–∑–æ–ø–∞—Å–Ω.',warChestLabel:'–†–µ–∑–µ—Ä–≤',chfCrash:'CHF –Ω–∞ –∫—Ä–∏–∑–∏—Å',purchasingPower:'–ü–æ–∫—É–ø–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏–ª–∞',chfReal:'CHF —Ä–µ–∞–ª—å–Ω.',strategyHealth:'–ó–¥–æ—Ä–æ–≤—å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏',fragile:'–•—Ä—É–ø–∫–∞—è',stable:'–°—Ç–∞–±–∏–ª—å–Ω–∞—è',robust:'–£—Å—Ç–æ–π—á–∏–≤–∞—è',moderate:'–°—Ä–µ–¥–Ω—è—è',historicalSim:'–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è —Å–∏–º—É–ª—è—Ü–∏—è',yearsShort:'–õ–µ—Ç',etfDepot:'ETF –î–µ–ø–æ',totalWealth:'–ò—Ç–æ–≥–æ',crisisPhase:'–ö—Ä–∏–∑–∏—Å',withdrawalAnalysis:'–ê–Ω–∞–ª–∏–∑ —Å–Ω—è—Ç–∏–π',totalWithdrawal:'–í—Å–µ–≥–æ —Å–Ω—è—Ç–æ',capitalUsed:'–ò—Å–ø–æ–ª—å–∑–æ–≤. –∫–∞–ø–∏—Ç–∞–ª',marketGain:'–ü—Ä–∏–±—ã–ª—å —Ä—ã–Ω–∫–∞',endWealth:'–ò—Ç–æ–≥–æ–≤—ã–π –∫–∞–ø–∏—Ç–∞–ª',worstDepot:'–ú–∏–Ω. –∑–Ω–∞—á–µ–Ω–∏–µ –¥–µ–ø–æ',crisesSurvived:'–ü–µ—Ä–µ–∂–∏—Ç–æ –∫—Ä–∏–∑–∏—Å–æ–≤',bufferMonths:'–ú–µ—Å. –±—É—Ñ–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑.',yearsUnit:'–õ–µ—Ç',monthsUnit:'–º–µ—Å.',monthsCoverage:'–º–µ—Å. –ø–æ–∫—Ä—ã—Ç–∏—è',inclPension:'–≤–∫–ª. –ø–µ–Ω—Å–∏—é',bearMarkets:'–º–µ–¥–≤–µ–∂—å–∏—Ö —Ä—ã–Ω–∫–æ–≤',warnLowETF:'‚ö† –ú–µ–Ω–µ–µ 15% –≤ ETF.',warnNoETF:'üö´ –ù–µ—Ç –∫–∞–ø–∏—Ç–∞–ª–∞ ETF!',warnNegative:'üö´ –°–Ω—è—Ç–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.',warnHighSWR:'‚ö† –°—Ç–∞–≤–∫–∞ {0}% ‚Äî –≤—ã—à–µ –ø—Ä–∞–≤–∏–ª–∞ 4%.',warnHighLegacy:'‚ö† –ù–∞—Å–ª–µ–¥—Å—Ç–≤–æ > 60% –∫–∞–ø–∏—Ç–∞–ª–∞.',methodInfo:'–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –∫—Ä–∏–∑–∏—Å—ã (1975‚Äì2025).',nominalEq:'–Ω–æ–º–∏–Ω–∞–ª = {0} —Ä–µ–∞–ª—å–Ω.'},
tr:{code:'TR',name:'T√ºrk√ße',title:'Finansal Kale',subtitle:'Stratejik √áekim Sim√ºlasyonu',baseParams:'Temel Parametreler',startCapital:'Ba≈ülangƒ±√ß Sermayesi',duration:'√áekim S√ºresi',targetLegacy:'Hedef Miras',inflation:'Enflasyon (% y.b.)',marketStrategy:'Piyasa ve Strateji',expectedReturn:'Beklenen Getiri (% y.b.)',warChest:'Sava≈ü Sandƒ±ƒüƒ± (%)',cashBuffer:'Nakit Tampon (Yƒ±l)',pension:'Emekli Maa≈üƒ± (aylƒ±k)',allocation:'Sermaye Daƒüƒ±lƒ±mƒ±',bufferShort:'Tampon',warShort:'Sava≈ü',monthlyBudget:'Aylƒ±k B√ºt√ße',month:'ay',cashBufferLabel:'Nakit Tampon',chfSafety:'CHF G√ºvenlik',warChestLabel:'Sava≈ü Sandƒ±ƒüƒ±',chfCrash:'CHF Kriz ƒ∞√ßin',purchasingPower:'Satƒ±n Alma G√ºc√º',chfReal:'CHF reel (bug√ºn)',strategyHealth:'Strateji Saƒülƒ±ƒüƒ±',fragile:'Kƒ±rƒ±lgan',stable:'Kararlƒ±',robust:'Saƒülam',moderate:'Orta',historicalSim:'Tarihsel Sim√ºlasyon',yearsShort:'Yƒ±l',etfDepot:'ETF Deposu',totalWealth:'Toplam',crisisPhase:'Kriz',withdrawalAnalysis:'√áekim Analizi',totalWithdrawal:'Toplam √ßekim',capitalUsed:'Kullanƒ±lan sermaye',marketGain:'Piyasa kazancƒ±',endWealth:'Biti≈ü varlƒ±ƒüƒ±',worstDepot:'En d√º≈ü√ºk depo',crisesSurvived:'Atlatƒ±lan krizler',bufferMonths:'Tampon aylarƒ±',yearsUnit:'Yƒ±l',monthsUnit:'ay',monthsCoverage:'ay kapsam',inclPension:'emekli maa≈üƒ± dahil',bearMarkets:'ayƒ± piyasasƒ±',warnLowETF:'‚ö† ETF\'de %15\'den az.',warnNoETF:'üö´ ETF sermayesi yok!',warnNegative:'üö´ √áekim imkansƒ±z.',warnHighSWR:'‚ö† Oran {0}% ‚Äî %4 kuralƒ±nƒ±n √ºst√ºnde.',warnHighLegacy:'‚ö† Miras > sermayenin %60\'ƒ±.',methodInfo:'Tarihsel krizler (1975‚Äì2025).',nominalEq:'nominal = {0} reel'},
sv:{code:'SV',name:'Svenska',title:'Finansiell F√§stning',subtitle:'Strategisk Uttagssimulering',baseParams:'Basparametrar',startCapital:'Startkapital',duration:'Uttagsperiod',targetLegacy:'M√•lat Arv',inflation:'Inflation (% p.a.)',marketStrategy:'Marknad & Strategi',expectedReturn:'F√∂rv√§ntad Avkastning (% p.a.)',warChest:'Krigskassa (%)',cashBuffer:'Kontantbuffert (√Ör)',pension:'Pension (m√•nadsvis)',allocation:'Kapitalallokering',bufferShort:'Buffert',warShort:'Krig',monthlyBudget:'M√•nadsbudget',month:'m√•nad',cashBufferLabel:'Kontantbuffert',chfSafety:'CHF S√§kerhet',warChestLabel:'Krigskassa',chfCrash:'CHF f√∂r Krascher',purchasingPower:'K√∂pkraft',chfReal:'CHF realt (idag)',strategyHealth:'Strategih√§lsa',fragile:'Sk√∂r',stable:'Stabil',robust:'Robust',moderate:'M√•ttlig',historicalSim:'Historisk Simulering',yearsShort:'√Ör',etfDepot:'ETF-Depot',totalWealth:'Totalt',crisisPhase:'Kris',withdrawalAnalysis:'Uttagsanalys',totalWithdrawal:'Totalt uttag',capitalUsed:'Kapital anv√§nt',marketGain:'Marknadsvinst',endWealth:'Slutf√∂rm√∂genhet',worstDepot:'L√§gsta depotv√§rde',crisesSurvived:'Kriser √∂verlevda',bufferMonths:'Buffertm√•nader',yearsUnit:'√Ör',monthsUnit:'m√•nader',monthsCoverage:'m√•nader t√§ckning',inclPension:'inkl. pension',bearMarkets:'bj√∂rnmarknader',warnLowETF:'‚ö† Under 15% i ETF.',warnNoETF:'üö´ Inget ETF-kapital!',warnNegative:'üö´ Uttag om√∂jligt.',warnHighSWR:'‚ö† Uttag {0}% ‚Äî √∂ver 4%-regeln.',warnHighLegacy:'‚ö† Arv > 60% av kapital.',methodInfo:'Historiska kriser (1975‚Äì2025).',nominalEq:'nominellt = {0} realt'},
da:{code:'DA',name:'Dansk',title:'Finansiel F√¶stning',subtitle:'Strategisk Udbetalingssimulering',baseParams:'Basisparametre',startCapital:'Startkapital',duration:'Udbetalingsperiode',targetLegacy:'M√•l-Arv',inflation:'Inflation (% p.a.)',marketStrategy:'Marked & Strategi',expectedReturn:'Forventet Afkast (% p.a.)',warChest:'Krigskasse (%)',cashBuffer:'Kontantbuffer (√Ör)',pension:'Pension (m√•nedlig)',allocation:'Kapitalallokering',bufferShort:'Buffer',warShort:'Krig',monthlyBudget:'M√•nedsbudget',month:'m√•ned',cashBufferLabel:'Kontantbuffer',chfSafety:'CHF Sikkerhed',warChestLabel:'Krigskasse',chfCrash:'CHF til Kriser',purchasingPower:'K√∏bekraft',chfReal:'CHF reel (i dag)',strategyHealth:'Strategisundhed',fragile:'Skr√∏belig',stable:'Stabil',robust:'Robust',moderate:'Moderat',historicalSim:'Historisk Simulering',yearsShort:'√Ör',etfDepot:'ETF-Depot',totalWealth:'Total',crisisPhase:'Krise',withdrawalAnalysis:'Udbetalingsanalyse',totalWithdrawal:'Total udbetaling',capitalUsed:'Kapital brugt',marketGain:'Markedsgevinst',endWealth:'Slutformue',worstDepot:'Laveste depotv√¶rdi',crisesSurvived:'Kriser overlevet',bufferMonths:'Bufferm√•neder',yearsUnit:'√Ör',monthsUnit:'m√•neder',monthsCoverage:'m√•neder d√¶kning',inclPension:'inkl. pension',bearMarkets:'bj√∏rnemarkeder',warnLowETF:'‚ö† Under 15% i ETF.',warnNoETF:'üö´ Ingen ETF-kapital!',warnNegative:'üö´ Udbetaling umulig.',warnHighSWR:'‚ö† Rate {0}% ‚Äî over 4%-reglen.',warnHighLegacy:'‚ö† Arv > 60% af kapital.',methodInfo:'Historiske kriser (1975‚Äì2025).',nominalEq:'nominelt = {0} reelt'},
no:{code:'NO',name:'Norsk',title:'Finansiell Festning',subtitle:'Strategisk Uttakssimulering',baseParams:'Basisparametere',startCapital:'Startkapital',duration:'Uttaksperiode',targetLegacy:'M√•l-Arv',inflation:'Inflasjon (% p.a.)',marketStrategy:'Marked & Strategi',expectedReturn:'Forventet Avkastning (% p.a.)',warChest:'Krigskasse (%)',cashBuffer:'Kontantbuffer (√Ör)',pension:'Pensjon (m√•nedlig)',allocation:'Kapitalallokering',bufferShort:'Buffer',warShort:'Krig',monthlyBudget:'M√•nedsbudsjett',month:'m√•ned',cashBufferLabel:'Kontantbuffer',chfSafety:'CHF Sikkerhet',warChestLabel:'Krigskasse',chfCrash:'CHF til Krasj',purchasingPower:'Kj√∏pekraft',chfReal:'CHF reell (i dag)',strategyHealth:'Strategihelse',fragile:'Skj√∏r',stable:'Stabil',robust:'Robust',moderate:'Moderat',historicalSim:'Historisk Simulering',yearsShort:'√Ör',etfDepot:'ETF-Depot',totalWealth:'Total',crisisPhase:'Krise',withdrawalAnalysis:'Uttaksanalyse',totalWithdrawal:'Totalt uttak',capitalUsed:'Kapital brukt',marketGain:'Markedsgevinst',endWealth:'Sluttformue',worstDepot:'Laveste depotverdi',crisesSurvived:'Kriser overlevd',bufferMonths:'Bufferm√•neder',yearsUnit:'√Ör',monthsUnit:'m√•neder',monthsCoverage:'m√•neder dekning',inclPension:'inkl. pensjon',bearMarkets:'bj√∏rnemarkeder',warnLowETF:'‚ö† Under 15% i ETF.',warnNoETF:'üö´ Ingen ETF-kapital!',warnNegative:'üö´UtFuttak umulig.',warnHighSWR:'‚ö† Rate {0}% ‚Äî over 4%-regelen.',warnHighLegacy:'‚ö† Arv > 60% av kapital.',methodInfo:'Historiske kriser (1975‚Äì2025).',nominalEq:'nominelt = {0} reelt'},
fi:{code:'FI',name:'Suomi',title:'Taloudellinen Linnoitus',subtitle:'Strateginen Nostosimulaatio',baseParams:'Perusparametrit',startCapital:'Alkup√§√§oma',duration:'Nostojakso',targetLegacy:'Perint√∂tavoite',inflation:'Inflaatio (% v.)',marketStrategy:'Markkinat & Strategia',expectedReturn:'Odotettu Tuotto (% v.)',warChest:'Sotakassa (%)',cashBuffer:'K√§teispuskuri (Vuotta)',pension:'El√§ke (kk)',allocation:'P√§√§oman Jako',bufferShort:'Puskuri',warShort:'Sota',monthlyBudget:'Kuukausibudjetti',month:'kk',cashBufferLabel:'K√§teispuskuri',chfSafety:'CHF Turva',warChestLabel:'Sotakassa',chfCrash:'CHF Kriisiin',purchasingPower:'Ostovoima',chfReal:'CHF reaal. (t√§n√§√§n)',strategyHealth:'Strategian Terveys',fragile:'Hauras',stable:'Vakaa',robust:'Vahva',moderate:'Kohtalainen',historicalSim:'Historiallinen Simulaatio',yearsShort:'Vuotta',etfDepot:'ETF-Tili',totalWealth:'Yhteens√§',crisisPhase:'Kriisi',withdrawalAnalysis:'Nostoanalyysi',totalWithdrawal:'Nostot yhteens√§',capitalUsed:'K√§ytetty p√§√§oma',marketGain:'Markkinatuotto',endWealth:'Loppuvarallisuus',worstDepot:'Alin tilin arvo',crisesSurvived:'Selvityt kriisit',bufferMonths:'Puskurikuukaudet',yearsUnit:'Vuotta',monthsUnit:'kk',monthsCoverage:'kk kattavuus',inclPension:'sis. el√§ke',bearMarkets:'karhumarkkinat',warnLowETF:'‚ö† Alle 15% ETF:ss√§.',warnNoETF:'üö´ Ei ETF-p√§√§omaa!',warnNegative:'üö´ Nosto mahdoton.',warnHighSWR:'‚ö† Nosto {0}% ‚Äî yli 4%-s√§√§nn√∂n.',warnHighLegacy:'‚ö† Perint√∂ > 60% p√§√§omasta.',methodInfo:'Historialliset kriisit (1975‚Äì2025).',nominalEq:'nimellinen = {0} reaalinen'},
cs:{code:'CS',name:'ƒåe≈°tina',title:'Finanƒçn√≠ Pevnost',subtitle:'Strategick√° Simulace V√Ωbƒõr≈Ø',baseParams:'Z√°kladn√≠ parametry',startCapital:'Poƒç√°teƒçn√≠ kapit√°l',duration:'Obdob√≠ v√Ωbƒõr≈Ø',targetLegacy:'C√≠lov√© dƒõdictv√≠',inflation:'Inflace (% r.)',marketStrategy:'Trh a Strategie',expectedReturn:'Oƒçek√°van√Ω v√Ωnos (% r.)',warChest:'V√°leƒçn√° pokladna (%)',cashBuffer:'Hotovostn√≠ pol≈°t√°≈ô (Roky)',pension:'D≈Øchod (mƒõs√≠ƒçnƒõ)',allocation:'Alokace kapit√°lu',bufferShort:'Pol≈°t√°≈ô',warShort:'V√°lka',monthlyBudget:'Mƒõs√≠ƒçn√≠ rozpoƒçet',month:'mƒõs√≠c',cashBufferLabel:'Hotovostn√≠ pol≈°t√°≈ô',chfSafety:'CHF Bezpeƒç√≠',warChestLabel:'V√°leƒçn√° pokladna',chfCrash:'CHF na krize',purchasingPower:'Kupn√≠ s√≠la',chfReal:'CHF re√°lnƒõ (dnes)',strategyHealth:'Zdrav√≠ strategie',fragile:'K≈ôehk√°',stable:'Stabiln√≠',robust:'Robustn√≠',moderate:'St≈ôedn√≠',historicalSim:'Historick√° simulace',yearsShort:'Let',etfDepot:'ETF Depot',totalWealth:'Celkem',crisisPhase:'Krize',withdrawalAnalysis:'Anal√Ωza v√Ωbƒõr≈Ø',totalWithdrawal:'Celkov√Ω v√Ωbƒõr',capitalUsed:'Pou≈æit√Ω kapit√°l',marketGain:'Tr≈æn√≠ zisk',endWealth:'Koneƒçn√Ω majetek',worstDepot:'Nejni≈æ≈°√≠ hodnota',crisesSurvived:'P≈ôe≈æit√© krize',bufferMonths:'Mƒõs√≠ce pol≈°t√°≈ôe',yearsUnit:'Let',monthsUnit:'mƒõs√≠c≈Ø',monthsCoverage:'mƒõs. pokryt√≠',inclPension:'vƒç. d≈Øchodu',bearMarkets:'medvƒõd√≠ch trh≈Ø',warnLowETF:'‚ö† M√©nƒõ ne≈æ 15% v ETF.',warnNoETF:'üö´ ≈Ω√°dn√Ω ETF kapit√°l!',warnNegative:'üö´ V√Ωbƒõr nemo≈æn√Ω.',warnHighSWR:'‚ö† Sazba {0}% ‚Äî nad pravidlem 4%.',warnHighLegacy:'‚ö† Dƒõdictv√≠ > 60% kapit√°lu.',methodInfo:'Historick√© krize (1975‚Äì2025).',nominalEq:'nomin√°ln√≠ = {0} re√°lnƒõ'},
hu:{code:'HU',name:'Magyar',title:'P√©nz√ºgyi Er≈ëd',subtitle:'Strat√©giai Kifizet√©s Szimul√°ci√≥',baseParams:'Alapparam√©terek',startCapital:'Indul√≥ t≈ëke',duration:'Kifizet√©si id≈ëszak',targetLegacy:'C√©l √∂r√∂ks√©g',inflation:'Infl√°ci√≥ (% √©.)',marketStrategy:'Piac √©s Strat√©gia',expectedReturn:'V√°rt hozam (% √©.)',warChest:'Hadikassza (%)',cashBuffer:'K√©szp√©nzpuffer (√âv)',pension:'Nyugd√≠j (havi)',allocation:'T≈ëkeallok√°ci√≥',bufferShort:'Puffer',warShort:'Hadi',monthlyBudget:'Havi k√∂lts√©gvet√©s',month:'h√≥nap',cashBufferLabel:'K√©szp√©nzpuffer',chfSafety:'CHF Biztons√°g',warChestLabel:'Hadikassza',chfCrash:'CHF v√°ls√°gra',purchasingPower:'V√°s√°rl√≥er≈ë',chfReal:'CHF re√°l (ma)',strategyHealth:'Strat√©gia eg√©szs√©g',fragile:'T√∂r√©keny',stable:'Stabil',robust:'Robusztus',moderate:'M√©rs√©kelt',historicalSim:'T√∂rt√©nelmi szimul√°ci√≥',yearsShort:'√âv',etfDepot:'ETF Sz√°mla',totalWealth:'√ñsszes',crisisPhase:'V√°ls√°g',withdrawalAnalysis:'Kifizet√©s elemz√©s',totalWithdrawal:'√ñsszes kifizet√©s',capitalUsed:'Felhaszn√°lt t≈ëke',marketGain:'Piaci nyeres√©g',endWealth:'V√©gs≈ë vagyon',worstDepot:'Legrosszabb √©rt√©k',crisesSurvived:'T√∫l√©lt v√°ls√°gok',bufferMonths:'Puffer h√≥napok',yearsUnit:'√âv',monthsUnit:'h√≥nap',monthsCoverage:'h√≥nap fedezet',inclPension:'nyugd√≠jjal',bearMarkets:'medvepiacok',warnLowETF:'‚ö† 15% alatt ETF-ben.',warnNoETF:'üö´ Nincs ETF t≈ëke!',warnNegative:'üö´ Kifizet√©s lehetetlen.',warnHighSWR:'‚ö† Ar√°ny {0}% ‚Äî 4%-szab√°ly felett.',warnHighLegacy:'‚ö† √ñr√∂ks√©g > t≈ëke 60%-a.',methodInfo:'T√∂rt√©nelmi v√°ls√°gok (1975‚Äì2025).',nominalEq:'nomin√°lis = {0} re√°l'},
ro:{code:'RO',name:'Rom√¢nƒÉ',title:'FortƒÉrea»õƒÉ FinanciarƒÉ',subtitle:'Simulare StrategicƒÉ de Retrageri',baseParams:'Parametri de bazƒÉ',startCapital:'Capital ini»õial',duration:'DuratƒÉ retragere',targetLegacy:'Mo»ôtenire »õintƒÉ',inflation:'Infla»õie (% an.)',marketStrategy:'Pia»õƒÉ & Strategie',expectedReturn:'Randament a»ôteptat (% an.)',warChest:'RezervƒÉ de rƒÉzboi (%)',cashBuffer:'Tampon numerar (Ani)',pension:'Pensie (lunar)',allocation:'Alocarea capitalului',bufferShort:'Tampon',warShort:'RƒÉzboi',monthlyBudget:'Buget lunar',month:'lunƒÉ',cashBufferLabel:'Tampon numerar',chfSafety:'CHF Siguran»õƒÉ',warChestLabel:'RezervƒÉ de rƒÉzboi',chfCrash:'CHF pt. crize',purchasingPower:'Putere de cumpƒÉrare',chfReal:'CHF real (azi)',strategyHealth:'SƒÉnƒÉtatea strategiei',fragile:'FragilƒÉ',stable:'StabilƒÉ',robust:'RobustƒÉ',moderate:'ModeratƒÉ',historicalSim:'Simulare istoricƒÉ',yearsShort:'Ani',etfDepot:'Depozit ETF',totalWealth:'Total',crisisPhase:'CrizƒÉ',withdrawalAnalysis:'Analiza retragerilor',totalWithdrawal:'Retragere totalƒÉ',capitalUsed:'Capital utilizat',marketGain:'C√¢»ôtig pia»õƒÉ',endWealth:'Avere finalƒÉ',worstDepot:'Cea mai micƒÉ valoare',crisesSurvived:'Crize supravie»õuite',bufferMonths:'Luni tampon',yearsUnit:'Ani',monthsUnit:'luni',monthsCoverage:'luni acoperire',inclPension:'incl. pensie',bearMarkets:'pie»õe bear',warnLowETF:'‚ö† Sub 15% √Æn ETF.',warnNoETF:'üö´ FƒÉrƒÉ capital ETF!',warnNegative:'üö´ Retragere imposibilƒÉ.',warnHighSWR:'‚ö† Rata {0}% ‚Äî peste regula 4%.',warnHighLegacy:'‚ö† Mo»ôtenire > 60% din capital.',methodInfo:'Crize istorice (1975‚Äì2025).',nominalEq:'nominal = {0} real'},
el:{code:'EL',name:'ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨',title:'ŒßœÅŒ∑ŒºŒ±œÑŒøŒøŒπŒ∫ŒøŒΩŒøŒºŒπŒ∫œå Œ¶œÅŒøœçœÅŒπŒø',subtitle:'Œ£œÑœÅŒ±œÑŒ∑Œ≥ŒπŒ∫ŒÆ Œ†œÅŒøœÉŒøŒºŒøŒØœâœÉŒ∑ ŒëŒΩŒ±ŒªŒÆœàŒµœâŒΩ',baseParams:'ŒíŒ±œÉŒπŒ∫Œ≠œÇ Œ†Œ±œÅŒ¨ŒºŒµœÑœÅŒøŒπ',startCapital:'ŒëœÅœáŒπŒ∫œå ŒöŒµœÜŒ¨ŒªŒ±ŒπŒø',duration:'ŒîŒπŒ¨œÅŒ∫ŒµŒπŒ± ŒëŒΩŒ¨ŒªŒ∑œàŒ∑œÇ',targetLegacy:'Œ£œÑœåœáŒøœÇ ŒöŒªŒ∑œÅŒøŒΩŒøŒºŒπŒ¨œÇ',inflation:'Œ†ŒªŒ∑Œ∏œâœÅŒπœÉŒºœåœÇ (% ŒµœÑ.)',marketStrategy:'ŒëŒ≥ŒøœÅŒ¨ & Œ£œÑœÅŒ±œÑŒ∑Œ≥ŒπŒ∫ŒÆ',expectedReturn:'ŒëŒΩŒ±ŒºŒµŒΩœåŒºŒµŒΩŒ∑ ŒëœÄœåŒ¥ŒøœÉŒ∑ (% ŒµœÑ.)',warChest:'Œ†ŒøŒªŒµŒºŒπŒ∫œå Œ§Œ±ŒºŒµŒØŒø (%)',cashBuffer:'Œ°ŒµŒ∂Œ≠œÅŒ≤Œ± ŒúŒµœÑœÅŒ∑œÑœéŒΩ (ŒàœÑŒ∑)',pension:'Œ£œçŒΩœÑŒ±ŒæŒ∑ (ŒºŒ∑ŒΩŒπŒ±ŒØŒ±)',allocation:'ŒöŒ±œÑŒ±ŒΩŒøŒºŒÆ ŒöŒµœÜŒ±ŒªŒ±ŒØŒøœÖ',bufferShort:'Œ°ŒµŒ∂Œ≠œÅŒ≤Œ±',warShort:'Œ†œåŒªŒµŒºŒøœÇ',monthlyBudget:'ŒúŒ∑ŒΩŒπŒ±ŒØŒøœÇ Œ†œÅŒøœãœÄ.',month:'ŒºŒÆŒΩŒ±',cashBufferLabel:'Œ°ŒµŒ∂Œ≠œÅŒ≤Œ± ŒúŒµœÑœÅŒ∑œÑœéŒΩ',chfSafety:'CHF ŒëœÉœÜŒ¨ŒªŒµŒπŒ±',warChestLabel:'Œ†ŒøŒªŒµŒºŒπŒ∫œå Œ§Œ±ŒºŒµŒØŒø',chfCrash:'CHF Œ≥ŒπŒ± ŒöœÅŒØœÉŒµŒπœÇ',purchasingPower:'ŒëŒ≥ŒøœÅŒ±œÉœÑŒπŒ∫ŒÆ ŒîœçŒΩŒ±ŒºŒ∑',chfReal:'CHF œÄœÅŒ±Œ≥Œº. (œÉŒÆŒºŒµœÅŒ±)',strategyHealth:'Œ•Œ≥ŒµŒØŒ± Œ£œÑœÅŒ±œÑŒ∑Œ≥ŒπŒ∫ŒÆœÇ',fragile:'ŒïœçŒ∏œÅŒ±œÖœÉœÑŒ∑',stable:'Œ£œÑŒ±Œ∏ŒµœÅŒÆ',robust:'ŒôœÉœáœÖœÅŒÆ',moderate:'ŒúŒ≠œÑœÅŒπŒ±',historicalSim:'ŒôœÉœÑŒøœÅŒπŒ∫ŒÆ Œ†œÅŒøœÉŒøŒºŒøŒØœâœÉŒ∑',yearsShort:'ŒàœÑŒ∑',etfDepot:'ETF ŒõŒøŒ≥.',totalWealth:'Œ£œçŒΩŒøŒªŒø',crisisPhase:'ŒöœÅŒØœÉŒ∑',withdrawalAnalysis:'ŒëŒΩŒ¨ŒªœÖœÉŒ∑ ŒëŒΩŒ±ŒªŒÆœàŒµœâŒΩ',totalWithdrawal:'Œ£œÖŒΩŒøŒªŒπŒ∫Œ≠œÇ Œ±ŒΩŒ±ŒªŒÆœàŒµŒπœÇ',capitalUsed:'ŒöŒµœÜŒ¨ŒªŒ±ŒπŒø œáœÅŒ∑œÉŒπŒºŒøœÄ.',marketGain:'ŒöŒ≠œÅŒ¥ŒøœÇ Œ±Œ≥ŒøœÅŒ¨œÇ',endWealth:'Œ§ŒµŒªŒπŒ∫œå Œ∫ŒµœÜŒ¨ŒªŒ±ŒπŒø',worstDepot:'ŒßŒ±ŒºŒ∑ŒªœåœÑŒµœÅŒ∑ Œ±ŒæŒØŒ±',crisesSurvived:'ŒöœÅŒØœÉŒµŒπœÇ Œ±ŒΩœÑŒπŒºŒµœÑœâœÄ.',bufferMonths:'ŒúŒÆŒΩŒµœÇ œÅŒµŒ∂Œ≠œÅŒ≤Œ±œÇ',yearsUnit:'ŒàœÑŒ∑',monthsUnit:'ŒºŒÆŒΩŒµœÇ',monthsCoverage:'ŒºŒÆŒΩ. Œ∫Œ¨ŒªœÖœàŒ∑',inclPension:'ŒºŒµ œÉœçŒΩœÑŒ±ŒæŒ∑',bearMarkets:'bear markets',warnLowETF:'‚ö† ŒöŒ¨œÑœâ Œ±œÄœå 15% œÉŒµ ETF.',warnNoETF:'üö´ ŒßœâœÅŒØœÇ Œ∫ŒµœÜŒ¨ŒªŒ±ŒπŒø ETF!',warnNegative:'üö´ ŒëŒΩŒ¨ŒªŒ∑œàŒ∑ Œ±Œ¥œçŒΩŒ±œÑŒ∑.',warnHighSWR:'‚ö† Œ°œÖŒ∏ŒºœåœÇ {0}% ‚Äî œÄŒ¨ŒΩœâ Œ±œÄœå 4%.',warnHighLegacy:'‚ö† ŒöŒªŒ∑œÅŒøŒΩŒøŒºŒπŒ¨ > 60% Œ∫ŒµœÜŒ±ŒªŒ±ŒØŒøœÖ.',methodInfo:'ŒôœÉœÑŒøœÅŒπŒ∫Œ≠œÇ Œ∫œÅŒØœÉŒµŒπœÇ (1975‚Äì2025).',nominalEq:'ŒøŒΩŒøŒºŒ±œÉœÑŒπŒ∫ŒÆ = {0} œÄœÅŒ±Œ≥ŒºŒ±œÑŒπŒ∫ŒÆ'},
uk:{code:'UK',name:'–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞',title:'–§—ñ–Ω–∞–Ω—Å–æ–≤–∞ –§–æ—Ä—Ç–µ—Ü—è',subtitle:'–°—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–∞ —Å–∏–º—É–ª—è—Ü—ñ—è –≤–∏–ø–ª–∞—Ç',baseParams:'–ë–∞–∑–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏',startCapital:'–ü–æ—á–∞—Ç–∫–æ–≤–∏–π –∫–∞–ø—ñ—Ç–∞–ª',duration:'–ü–µ—Ä—ñ–æ–¥ –≤–∏–ø–ª–∞—Ç',targetLegacy:'–¶—ñ–ª—å–æ–≤–∞ —Å–ø–∞–¥—â–∏–Ω–∞',inflation:'–Ü–Ω—Ñ–ª—è—Ü—ñ—è (% —Ä.)',marketStrategy:'–†–∏–Ω–æ–∫ —Ç–∞ –°—Ç—Ä–∞—Ç–µ–≥—ñ—è',expectedReturn:'–û—á—ñ–∫—É–≤–∞–Ω–∞ –¥–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å (% —Ä.)',warChest:'–í–æ—î–Ω–Ω–∞ —Å–∫–∞—Ä–±–Ω–∏—Ü—è (%)',cashBuffer:'–ì—Ä–æ—à–æ–≤–∏–π –±—É—Ñ–µ—Ä (–†–æ–∫–∏)',pension:'–ü–µ–Ω—Å—ñ—è (—â–æ–º—ñ—Å—è—Ü—è)',allocation:'–†–æ–∑–ø–æ–¥—ñ–ª –∫–∞–ø—ñ—Ç–∞–ª—É',bufferShort:'–ë—É—Ñ–µ—Ä',warShort:'–í—ñ–π–Ω–∞',monthlyBudget:'–ú—ñ—Å—è—á–Ω–∏–π –±—é–¥–∂–µ—Ç',month:'–º—ñ—Å',cashBufferLabel:'–ì—Ä–æ—à–æ–≤–∏–π –±—É—Ñ–µ—Ä',chfSafety:'CHF –ë–µ–∑–ø–µ–∫–∞',warChestLabel:'–í–æ—î–Ω–Ω–∞ —Å–∫–∞—Ä–±–Ω–∏—Ü—è',chfCrash:'CHF –Ω–∞ –∫—Ä–∏–∑—É',purchasingPower:'–ö—É–ø—ñ–≤–µ–ª—å–Ω–∞ —Å–ø—Ä–æ–º–æ–∂–Ω—ñ—Å—Ç—å',chfReal:'CHF —Ä–µ–∞–ª—å–Ω.',strategyHealth:'–ó–¥–æ—Ä–æ–≤\'—è —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó',fragile:'–ö—Ä–∏—Ö–∫–∞',stable:'–°—Ç–∞–±—ñ–ª—å–Ω–∞',robust:'–°—Ç—ñ–π–∫–∞',moderate:'–ü–æ–º—ñ—Ä–Ω–∞',historicalSim:'–Ü—Å—Ç–æ—Ä–∏—á–Ω–∞ —Å–∏–º—É–ª—è—Ü—ñ—è',yearsShort:'–†–æ–∫—ñ–≤',etfDepot:'ETF –î–µ–ø–æ',totalWealth:'–£—Å—å–æ–≥–æ',crisisPhase:'–ö—Ä–∏–∑–∞',withdrawalAnalysis:'–ê–Ω–∞–ª—ñ–∑ –≤–∏–ø–ª–∞—Ç',totalWithdrawal:'–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∏–ø–ª–∞—Ç–∞',capitalUsed:'–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π –∫–∞–ø—ñ—Ç–∞–ª',marketGain:'–†–∏–Ω–∫–æ–≤–∏–π –ø—Ä–∏–±—É—Ç–æ–∫',endWealth:'–ö—ñ–Ω—Ü–µ–≤–µ –±–∞–≥–∞—Ç—Å—Ç–≤–æ',worstDepot:'–ú—ñ–Ω. –∑–Ω–∞—á–µ–Ω–Ω—è –¥–µ–ø–æ',crisesSurvived:'–ü–µ—Ä–µ–∂–∏—Ç–∏—Ö –∫—Ä–∏–∑',bufferMonths:'–ú—ñ—Å—è—Ü—ñ –±—É—Ñ–µ—Ä–∞',yearsUnit:'–†–æ–∫—ñ–≤',monthsUnit:'–º—ñ—Å.',monthsCoverage:'–º—ñ—Å. –ø–æ–∫—Ä–∏—Ç—Ç—è',inclPension:'–≤–∫–ª. –ø–µ–Ω—Å—ñ—é',bearMarkets:'–≤–µ–¥–º–µ–∂–∏—Ö —Ä–∏–Ω–∫—ñ–≤',warnLowETF:'‚ö† –ú–µ–Ω—à–µ 15% –≤ ETF.',warnNoETF:'üö´ –ù–µ–º–∞—î –∫–∞–ø—ñ—Ç–∞–ª—É ETF!',warnNegative:'üö´ –í–∏–ø–ª–∞—Ç–∞ –Ω–µ–º–æ–∂–ª–∏–≤–∞.',warnHighSWR:'‚ö† –°—Ç–∞–≤–∫–∞ {0}% ‚Äî –≤–∏—â–µ –ø—Ä–∞–≤–∏–ª–∞ 4%.',warnHighLegacy:'‚ö† –°–ø–∞–¥—â–∏–Ω–∞ > 60% –∫–∞–ø—ñ—Ç–∞–ª—É.',methodInfo:'–Ü—Å—Ç–æ—Ä–∏—á–Ω—ñ –∫—Ä–∏–∑–∏ (1975‚Äì2025).',nominalEq:'–Ω–æ–º—ñ–Ω–∞–ª = {0} —Ä–µ–∞–ª—å–Ω.'},
hi:{code:'HI',name:'‡§π‡§ø‡§®‡•ç‡§¶‡•Ä',title:'‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§ï‡§ø‡§≤‡§æ',subtitle:'‡§∞‡§£‡§®‡•Ä‡§§‡§ø‡§ï ‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä ‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§∂‡§®',baseParams:'‡§Æ‡•Ç‡§≤ ‡§™‡•à‡§∞‡§æ‡§Æ‡•Ä‡§ü‡§∞',startCapital:'‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠‡§ø‡§ï ‡§™‡•Ç‡§Ç‡§ú‡•Ä',duration:'‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä ‡§Ö‡§µ‡§ß‡§ø',targetLegacy:'‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§µ‡§ø‡§∞‡§æ‡§∏‡§§',inflation:'‡§Æ‡•Å‡§¶‡•ç‡§∞‡§æ‡§∏‡•ç‡§´‡•Ä‡§§‡§ø (% ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï)',marketStrategy:'‡§¨‡§æ‡§ú‡§º‡§æ‡§∞ ‡§î‡§∞ ‡§∞‡§£‡§®‡•Ä‡§§‡§ø',expectedReturn:'‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§ø‡§§ ‡§™‡•ç‡§∞‡§§‡§ø‡§´‡§≤ (% ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï)',warChest:'‡§Ø‡•Å‡§¶‡•ç‡§ß ‡§ï‡•ã‡§∑ (%)',cashBuffer:'‡§®‡§ï‡§¶ ‡§¨‡§´‡§∞ (‡§µ‡§∞‡•ç‡§∑)',pension:'‡§™‡•á‡§Ç‡§∂‡§® (‡§Æ‡§æ‡§∏‡§ø‡§ï)',allocation:'‡§™‡•Ç‡§Ç‡§ú‡•Ä ‡§Ü‡§µ‡§Ç‡§ü‡§®',bufferShort:'‡§¨‡§´‡§∞',warShort:'‡§Ø‡•Å‡§¶‡•ç‡§ß',monthlyBudget:'‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§¨‡§ú‡§ü',month:'‡§Æ‡§æ‡§π',cashBufferLabel:'‡§®‡§ï‡§¶ ‡§¨‡§´‡§∞',chfSafety:'CHF ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ',warChestLabel:'‡§Ø‡•Å‡§¶‡•ç‡§ß ‡§ï‡•ã‡§∑',chfCrash:'CHF ‡§∏‡§Ç‡§ï‡§ü ‡§π‡•á‡§§‡•Å',purchasingPower:'‡§ï‡•ç‡§∞‡§Ø ‡§∂‡§ï‡•ç‡§§‡§ø',chfReal:'CHF ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï (‡§Ü‡§ú)',strategyHealth:'‡§∞‡§£‡§®‡•Ä‡§§‡§ø ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø',fragile:'‡§®‡§æ‡§ú‡•Å‡§ï',stable:'‡§∏‡•ç‡§•‡§ø‡§∞',robust:'‡§Æ‡§ú‡§¨‡•Ç‡§§',moderate:'‡§Æ‡§ß‡•ç‡§Ø‡§Æ',historicalSim:'‡§ê‡§§‡§ø‡§π‡§æ‡§∏‡§ø‡§ï ‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§∂‡§®',yearsShort:'‡§µ‡§∞‡•ç‡§∑',etfDepot:'ETF ‡§°‡§ø‡§™‡•ã',totalWealth:'‡§ï‡•Å‡§≤',crisisPhase:'‡§∏‡§Ç‡§ï‡§ü',withdrawalAnalysis:'‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',totalWithdrawal:'‡§ï‡•Å‡§≤ ‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä',capitalUsed:'‡§™‡•Ç‡§Ç‡§ú‡•Ä ‡§â‡§™‡§Ø‡•ã‡§ó',marketGain:'‡§¨‡§æ‡§ú‡§º‡§æ‡§∞ ‡§≤‡§æ‡§≠',endWealth:'‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø',worstDepot:'‡§®‡•ç‡§Ø‡•Ç‡§®‡§§‡§Æ ‡§°‡§ø‡§™‡•ã',crisesSurvived:'‡§∏‡§Ç‡§ï‡§ü ‡§∏‡§π‡•á',bufferMonths:'‡§¨‡§´‡§∞ ‡§Æ‡§æ‡§π',yearsUnit:'‡§µ‡§∞‡•ç‡§∑',monthsUnit:'‡§Æ‡§æ‡§π',monthsCoverage:'‡§Æ‡§æ‡§π ‡§ï‡§µ‡§∞‡•á‡§ú',inclPension:'‡§™‡•á‡§Ç‡§∂‡§® ‡§∏‡§π‡§ø‡§§',bearMarkets:'‡§Æ‡§Ç‡§¶‡•Ä ‡§¨‡§æ‡§ú‡§º‡§æ‡§∞',warnLowETF:'‚ö† ETF ‡§Æ‡•á‡§Ç 15% ‡§∏‡•á ‡§ï‡§Æ‡•§',warnNoETF:'üö´ ETF ‡§™‡•Ç‡§Ç‡§ú‡•Ä ‡§®‡§π‡•Ä‡§Ç!',warnNegative:'üö´ ‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä ‡§Ö‡§∏‡§Ç‡§≠‡§µ‡•§',warnHighSWR:'‚ö† ‡§¶‡§∞ {0}% ‚Äî 4% ‡§®‡§ø‡§Ø‡§Æ ‡§∏‡•á ‡§ä‡§™‡§∞‡•§',warnHighLegacy:'‚ö† ‡§µ‡§ø‡§∞‡§æ‡§∏‡§§ > ‡§™‡•Ç‡§Ç‡§ú‡•Ä ‡§ï‡§æ 60%‡•§',methodInfo:'‡§ê‡§§‡§ø‡§π‡§æ‡§∏‡§ø‡§ï ‡§∏‡§Ç‡§ï‡§ü (1975‚Äì2025)‡•§',nominalEq:'‡§Ö‡§Ç‡§ï‡§ø‡§§ = {0} ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï'},
zh:{code:'ZH',name:'‰∏≠Êñá',title:'ÈáëËûçÂ†°Âûí',subtitle:'ÊàòÁï•ÊèêÊ¨æÊ®°Êãü',baseParams:'Âü∫Êú¨ÂèÇÊï∞',startCapital:'ÂàùÂßãËµÑÊú¨',duration:'ÊèêÊ¨æÊúüÈôê',targetLegacy:'ÁõÆÊ†áÈÅó‰∫ß',inflation:'ÈÄöËÉÄÁéá (% Âπ¥)',marketStrategy:'Â∏ÇÂú∫‰∏éÁ≠ñÁï•',expectedReturn:'È¢ÑÊúüÊî∂Áõä (% Âπ¥)',warChest:'Êàò‰∫âÂü∫Èáë (%)',cashBuffer:'Áé∞ÈáëÁºìÂÜ≤ (Âπ¥)',pension:'ÂÖªËÄÅÈáë (Êúà)',allocation:'ËµÑÊú¨ÈÖçÁΩÆ',bufferShort:'ÁºìÂÜ≤',warShort:'Êàò‰∫â',monthlyBudget:'ÊúàÂ∫¶È¢ÑÁÆó',month:'Êúà',cashBufferLabel:'Áé∞ÈáëÁºìÂÜ≤',chfSafety:'CHF ÂÆâÂÖ®',warChestLabel:'Êàò‰∫âÂü∫Èáë',chfCrash:'CHF Âç±Êú∫Áî®',purchasingPower:'Ë¥≠‰π∞Âäõ',chfReal:'CHF ÂÆûÈôÖ(‰ªäÊó•)',strategyHealth:'Á≠ñÁï•ÂÅ•Â∫∑Â∫¶',fragile:'ËÑÜÂº±',stable:'Á®≥ÂÆö',robust:'Á®≥ÂÅ•',moderate:'‰∏≠Á≠â',historicalSim:'ÂéÜÂè≤Ê®°Êãü',yearsShort:'Âπ¥',etfDepot:'ETF Ë¥¶Êà∑',totalWealth:'ÊÄªËÆ°',crisisPhase:'Âç±Êú∫',withdrawalAnalysis:'ÊèêÊ¨æÂàÜÊûê',totalWithdrawal:'ÊÄªÊèêÊ¨æÈ¢ù',capitalUsed:'Â∑≤Áî®ËµÑÊú¨',marketGain:'Â∏ÇÂú∫Êî∂Áõä',endWealth:'ÁªàÂÄºË¥¢ÂØå',worstDepot:'ÊúÄ‰ΩéË¥¶Êà∑ÂÄº',crisesSurvived:'Â∫¶ËøáÂç±Êú∫',bufferMonths:'ÁºìÂÜ≤ÊúàÊï∞',yearsUnit:'Âπ¥',monthsUnit:'Êúà',monthsCoverage:'ÊúàË¶ÜÁõñ',inclPension:'Âê´ÂÖªËÄÅÈáë',bearMarkets:'ÁÜäÂ∏Ç',warnLowETF:'‚ö† ETF‰∏çË∂≥15%„ÄÇ',warnNoETF:'üö´ Êó†ETFËµÑÊú¨ÔºÅ',warnNegative:'üö´ Êó†Ê≥ïÊèêÊ¨æ„ÄÇ',warnHighSWR:'‚ö† ÊèêÊ¨æÁéá{0}% ‚Äî Ë∂ÖËøá4%ËßÑÂàô„ÄÇ',warnHighLegacy:'‚ö† ÈÅó‰∫ß > ËµÑÊú¨60%„ÄÇ',methodInfo:'ÂéÜÂè≤Âç±Êú∫Âè†Âä†(1975-2025)„ÄÇ',nominalEq:'Âêç‰πâ = {0} ÂÆûÈôÖ'},
};

let currentLang = 'en';

function detectLang() {
    const bl = (navigator.language || navigator.userLanguage || 'en').toLowerCase().split('-')[0];
    // Map browser codes to our keys
    const map = {en:'en',de:'de',fr:'fr',es:'es',it:'it',pt:'pt',nl:'nl',pl:'pl',ru:'ru',tr:'tr',sv:'sv',da:'da',nb:'no',nn:'no',no:'no',fi:'fi',cs:'cs',hu:'hu',ro:'ro',el:'el',uk:'uk',hi:'hi',zh:'zh'};
    return map[bl] || 'en';
}

function setLang(lang) {
    currentLang = lang;
    const t = LANGS[lang];
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (t[key]) el.textContent = t[key];
    });
    document.title = t.title + ' ‚Äî ' + t.subtitle;
    document.getElementById('langLabel').textContent = t.code;
    // Mark active in dropdown
    document.querySelectorAll('.lang-opt').forEach(o => o.classList.toggle('active', o.dataset.lang === lang));
    recalc();
}

function toggleLangDropdown() {
    const dd = document.getElementById('langDropdown');
    dd.classList.toggle('open');
    if (dd.classList.contains('open')) {
        setTimeout(() => document.addEventListener('click', closeLangOnOutside, {once:true}), 10);
    }
}
function closeLangOnOutside(e) {
    const dd = document.getElementById('langDropdown');
    if (!dd.contains(e.target) && e.target.id !== 'langBtn') dd.classList.remove('open');
}

// Build dropdown
(function buildLangDropdown() {
    const dd = document.getElementById('langDropdown');
    Object.entries(LANGS).forEach(([key, lang]) => {
        const el = document.createElement('div');
        el.className = 'lang-opt';
        el.dataset.lang = key;
        el.textContent = lang.code + ' ' + lang.name;
        el.onclick = (e) => { e.stopPropagation(); setLang(key); dd.classList.remove('open'); };
        dd.appendChild(el);
    });
})();


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// HISTORICAL CRISES DATABASE (1975 ‚Äî 2025)
// Monthly returns are approximated from S&P 500 / MSCI World data
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const HISTORICAL_CRISES = [
    { name: 'Oil Crisis / Stagflation',   startYear: 1973, startMonth: 10, durationMonths: 21, totalDrop: -0.48, recovery: 18 },
    { name: 'Volcker Recession',           startYear: 1980, startMonth: 2,  durationMonths: 20, totalDrop: -0.27, recovery: 12 },
    { name: 'Black Monday',               startYear: 1987, startMonth: 9,  durationMonths: 3,  totalDrop: -0.34, recovery: 20 },
    { name: 'Gulf War Recession',          startYear: 1990, startMonth: 7,  durationMonths: 6,  totalDrop: -0.20, recovery: 8  },
    { name: 'Asian / LTCM Crisis',         startYear: 1997, startMonth: 7,  durationMonths: 5,  totalDrop: -0.19, recovery: 6  },
    { name: 'Dotcom Crash',               startYear: 2000, startMonth: 3,  durationMonths: 30, totalDrop: -0.49, recovery: 24 },
    { name: 'Global Financial Crisis',     startYear: 2007, startMonth: 10, durationMonths: 17, totalDrop: -0.57, recovery: 24 },
    { name: 'EU Debt Crisis',             startYear: 2011, startMonth: 5,  durationMonths: 6,  totalDrop: -0.19, recovery: 8  },
    { name: 'China / Oil Shock',           startYear: 2015, startMonth: 8,  durationMonths: 7,  totalDrop: -0.14, recovery: 6  },
    { name: 'COVID-19 Crash',             startYear: 2020, startMonth: 2,  durationMonths: 2,  totalDrop: -0.34, recovery: 5  },
    { name: '2022 Bear Market',           startYear: 2022, startMonth: 1,  durationMonths: 10, totalDrop: -0.25, recovery: 12 },
];

// Timeline offset: which historical year = simulation month 0
let timelineStartYear = 1995;

function shiftTimeline(delta) {
    timelineStartYear = Math.max(1975, Math.min(2015, timelineStartYear + delta));
    recalc();
}


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// HELPERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const $ = id => document.getElementById(id);
const inputs = {
    capital: $('in-capital'), years: $('in-years'), legacy: $('in-legacy'),
    inflation: $('in-inflation'), growth: $('in-growth'), warchest: $('in-warchest'),
    buffer: $('in-buffer'), ahv: $('in-ahv'),
};
const fmt = n => new Intl.NumberFormat('de-CH', {maximumFractionDigits:0}).format(Math.round(n));
const fmtK = n => {
    if(Math.abs(n)>=1e6) return (n/1e6).toFixed(2).replace('.',',')+' M';
    if(Math.abs(n)>=1e3) return Math.round(n/1e3)+"k";
    return fmt(n);
};


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SOLVER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function solveWithdrawal(capital, years, legacy, warchestPct, bufferYears, annualGrowthRate) {
    const warChest = capital * (warchestPct / 100);
    const r = annualGrowthRate / 12;
    const n = years * 12;
    const F = Math.pow(1 + r, n);
    const B = bufferYears * 12;
    const legacyETF = Math.max(0, legacy - warChest);
    const fPrime = -B * F - (F - 1) / r;

    let w = 3000;
    for (let iter = 0; iter < 150; iter++) {
        const inv = capital - warChest - w * B;
        if (inv <= 0) { w *= 0.7; continue; }
        const fW = inv * F - w * (F - 1) / r - legacyETF;
        const wNew = w - fW / fPrime;
        if (wNew <= 0) { w *= 0.5; continue; }
        if (Math.abs(wNew - w) < 0.01) { w = wNew; break; }
        w = wNew;
    }
    const buffer = Math.max(0, w * B);
    const invested = Math.max(0, capital - warChest - buffer);
    return { warChest, buffer, invested, monthlyETF: Math.max(0, w) };
}


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SIMULATION WITH HISTORICAL CRISES OVERLAY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function simulate(params) {
    const { invested, buffer, warChest, monthlyETF, years, annualGrowth, inflation, ahv } = params;
    const months = years * 12;
    const rCash = 0.02 / 12;
    const baseReturn = annualGrowth / 12;
    const startY = timelineStartYear;

    let d = invested, b = buffer, w = warChest;
    const hD=[], hB=[], hW=[], hTotal=[], labels=[], crisisZones=[];
    let crisisCount=0, bufferMonthsUsed=0, worstDepot=invested;
    const hitCrises = [];

    for (let m = 0; m <= months; m++) {
        // Map simulation month to calendar
        const calYear = startY + Math.floor(m / 12);
        const calMonth = (m % 12) + 1;

        // Check if a historical crisis is active at this calendar point
        let inCrisis = false;
        let crisisReturn = 0;
        let activeCrisis = null;

        for (const c of HISTORICAL_CRISES) {
            const cStartAbs = c.startYear * 12 + c.startMonth;
            const cEndAbs = cStartAbs + c.durationMonths;
            const recEndAbs = cEndAbs + c.recovery;
            const nowAbs = calYear * 12 + calMonth;

            if (nowAbs >= cStartAbs && nowAbs < cEndAbs) {
                // In the crisis drop phase
                inCrisis = true;
                activeCrisis = c;
                const progress = (nowAbs - cStartAbs) / c.durationMonths;
                // Distribute the total drop: front-loaded using sin curve
                const weight = Math.sin(progress * Math.PI * 0.5);
                const monthlyDrop = c.totalDrop / c.durationMonths;
                crisisReturn = monthlyDrop * (1.2 - weight * 0.4) + (Math.random() - 0.4) * 0.008;
                break;
            } else if (nowAbs >= cEndAbs && nowAbs < recEndAbs) {
                // Recovery phase ‚Äî positive returns
                const recProgress = (nowAbs - cEndAbs) / c.recovery;
                crisisReturn = Math.abs(c.totalDrop) / c.recovery * (1.1 - recProgress * 0.5) + (Math.random()-0.3)*0.005;
                // Not marked as "crisis" visually, just enhanced returns
                break;
            }
        }

        // Track which crises were encountered
        if (inCrisis && activeCrisis && !hitCrises.find(h => h.name === activeCrisis.name)) {
            hitCrises.push(activeCrisis);
            crisisCount++;
        }

        const inflFactor = Math.pow(1 + inflation / 100 / 12, m);
        let needed = monthlyETF * inflFactor;

        // Dynamic reduction if depot critically low
        if (d < invested * 0.4 && invested > 0) {
            needed *= Math.max(0.35, d / invested);
        }

        let monthlyReturn;
        if (inCrisis) {
            monthlyReturn = crisisReturn;
            // Withdraw from buffer
            if (b > needed) { b -= needed; bufferMonthsUsed++; }
            else if (b > 0) { d -= (needed - b); b = 0; bufferMonthsUsed++; }
            else { d -= needed; }
            // Buy the dip
            if (w > warChest * 0.04 && monthlyReturn < -0.01) {
                const buy = w * Math.min(0.10, Math.abs(monthlyReturn) * 1.5);
                w -= buy; d += buy;
            }
        } else {
            monthlyReturn = baseReturn + (Math.random() - 0.5) * 0.015;
            // If in recovery, add the recovery return
            if (crisisReturn > 0) monthlyReturn = Math.max(monthlyReturn, crisisReturn);
            d -= needed;
            // Refill
            if (d > invested * 0.7) {
                const surplus = d * 0.002;
                if (b < buffer * 0.9) { const r2 = Math.min(surplus*0.6, buffer-b); if(r2>0){b+=r2;d-=r2;}}
                if (w < warChest * 0.8) { const r2 = Math.min(surplus*0.3, warChest-w); if(r2>0){w+=r2;d-=r2;}}
            }
        }

        d *= (1 + monthlyReturn);
        b *= (1 + rCash);
        w *= (1 + rCash);
        d = Math.max(0, d);
        b = Math.max(0, b);
        w = Math.max(0, w);
        worstDepot = Math.min(worstDepot, d);

        hD.push(d); hB.push(b); hW.push(w); hTotal.push(d+b+w);
        crisisZones.push(inCrisis ? 1 : 0);

        // Labels: show year on Jan
        if (m % 12 === 0) {
            labels.push(String(calYear));
        } else {
            labels.push('');
        }
    }

    return { labels, hD, hB, hW, hTotal, crisisZones, crisisCount, bufferMonthsUsed, worstDepot, hitCrises };
}


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CHART
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

let chart = null;
function renderChart(data, legacyTarget) {
    const ctx = $('mainChart').getContext('2d');
    if (chart) chart.destroy();

    const customPlugin = {
        id: 'overlays',
        beforeDraw(ch) {
            const {ctx: c, chartArea:{top,bottom,left,right}, scales:{x,y}} = ch;
            c.save();
            // Crisis shading
            let inB=false, bStart=0;
            data.crisisZones.forEach((a,i) => {
                if(a&&!inB){inB=true;bStart=i;}
                if(!a&&inB){
                    const x0=x.getPixelForValue(bStart),x1=x.getPixelForValue(i);
                    c.fillStyle='rgba(251,113,133,0.06)'; c.fillRect(x0,top,x1-x0,bottom-top);
                    c.fillStyle='rgba(251,113,133,0.25)'; c.fillRect(x0,top,x1-x0,2);
                    inB=false;
                }
            });
            if(inB){const x0=x.getPixelForValue(bStart),x1=x.getPixelForValue(data.crisisZones.length-1);c.fillStyle='rgba(251,113,133,0.06)';c.fillRect(x0,top,x1-x0,bottom-top);}
            // Legacy line
            if(legacyTarget>0){
                const yp=y.getPixelForValue(legacyTarget);
                if(yp>=top&&yp<=bottom){
                    c.setLineDash([5,5]);c.strokeStyle='rgba(167,139,250,0.4)';c.lineWidth=1;
                    c.beginPath();c.moveTo(left,yp);c.lineTo(right,yp);c.stroke();
                    c.setLineDash([]);c.fillStyle='rgba(167,139,250,0.6)';c.font='9px JetBrains Mono';c.textAlign='right';
                    c.fillText(fmtK(legacyTarget),right-4,yp-5);
                }
            }
            c.restore();
        }
    };

    chart = new Chart(ctx, {
        type:'line',
        data:{
            labels:data.labels,
            datasets:[
                {label:'ETF',data:data.hD,borderColor:'rgba(56,189,248,0.85)',backgroundColor:'rgba(56,189,248,0.03)',borderWidth:2,pointRadius:0,tension:0.3,fill:true,order:2},
                {label:'Buffer',data:data.hB,borderColor:'rgba(52,211,153,0.65)',borderWidth:1.5,pointRadius:0,tension:0.3,fill:false,order:3},
                {label:'War',data:data.hW,borderColor:'rgba(251,191,36,0.55)',borderWidth:1.5,borderDash:[4,3],pointRadius:0,tension:0.3,fill:false,order:4},
                {label:'Total',data:data.hTotal,borderColor:'rgba(251,113,133,0.2)',borderWidth:1,borderDash:[2,4],pointRadius:0,tension:0.3,fill:false,order:1},
            ]
        },
        options:{
            responsive:true,maintainAspectRatio:false,
            interaction:{mode:'index',intersect:false},
            plugins:{
                legend:{display:false},
                tooltip:{
                    backgroundColor:'rgba(8,12,20,0.95)',borderColor:'rgba(255,255,255,0.1)',borderWidth:1,
                    titleFont:{family:'JetBrains Mono',size:9},bodyFont:{family:'JetBrains Mono',size:9},padding:10,
                    callbacks:{
                        title:items=>{const i=items[0].dataIndex;const yr=timelineStartYear+Math.floor(i/12);const mo=(i%12)+1;return yr+'/'+String(mo).padStart(2,'0');},
                        label:c=>`${c.dataset.label}: ${fmt(c.raw)} CHF`
                    }
                }
            },
            scales:{
                x:{ticks:{color:'#475569',font:{family:'JetBrains Mono',size:9},maxTicksLimit:window.innerWidth<600?8:16,maxRotation:45},grid:{display:false}},
                y:{beginAtZero:true,ticks:{color:'#475569',font:{family:'JetBrains Mono',size:9},callback:v=>fmtK(v)},grid:{color:'rgba(255,255,255,0.03)'}}
            }
        },
        plugins:[customPlugin]
    });
}


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MAIN RECALC
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function recalc() {
    const t = LANGS[currentLang];
    const capital=+inputs.capital.value, years=+inputs.years.value, legacy=+inputs.legacy.value;
    const inflation=+inputs.inflation.value, growth=+inputs.growth.value;
    const warchestPct=+inputs.warchest.value, bufferYears=+inputs.buffer.value, ahv=+inputs.ahv.value;

    // Labels
    $('val-capital').textContent=fmt(capital)+' CHF';
    $('val-years').textContent=years+' '+t.yearsUnit;
    $('val-legacy').textContent=fmt(legacy)+' CHF';
    $('val-inflation').textContent=inflation.toFixed(1)+' %';
    $('val-growth').textContent=growth.toFixed(1)+' %';
    $('val-warchest').textContent=warchestPct.toFixed(1)+' %';
    $('val-buffer').textContent=bufferYears.toFixed(1)+' '+t.yearsUnit;
    $('val-ahv').textContent=fmt(ahv)+' CHF';
    $('lbl-years').textContent=years;
    $('timeline-label').textContent=timelineStartYear+' ‚Äî '+(timelineStartYear+years);

    // Solve
    const sol=solveWithdrawal(capital,years,legacy,warchestPct,bufferYears,growth/100);
    const {warChest,buffer,invested,monthlyETF}=sol;
    const totalMonthly=monthlyETF+ahv;
    const swr=capital>0?(monthlyETF*12)/capital*100:0;

    // Warnings
    const warns=[];
    if(invested<capital*0.15) warns.push(t.warnLowETF);
    if(invested<=0) warns.push(t.warnNoETF);
    if(monthlyETF<=0) warns.push(t.warnNegative);
    if(swr>5) warns.push(t.warnHighSWR.replace('{0}',swr.toFixed(1)));
    if(legacy>capital*0.6) warns.push(t.warnHighLegacy);
    const wb=$('warning-box');
    if(warns.length){wb.innerHTML=warns.join('<br>');wb.classList.add('active');}else{wb.classList.remove('active');}

    // KPI
    $('kpi-monthly').textContent=fmt(totalMonthly);
    $('kpi-monthly-sub').textContent=`(${fmt(monthlyETF)} ETF + ${fmt(ahv)} ${t.inclPension})`;
    $('kpi-buffer').textContent=fmtK(buffer);
    $('kpi-buffer-months').textContent=monthlyETF>0?Math.round(buffer/monthlyETF)+' '+t.monthsCoverage:'‚Äî';
    $('kpi-warchest').textContent=fmtK(warChest);
    const realEnd=totalMonthly/Math.pow(1+inflation/100,years);
    $('kpi-real').textContent=fmt(realEnd);
    $('kpi-real-sub').textContent=t.nominalEq.replace('{0}',fmt(realEnd));

    // Allocation
    const tot=Math.max(1,invested+buffer+warChest);
    $('alloc-bar').innerHTML=`<div class="alloc-seg" style="width:${(invested/tot*100).toFixed(0)}%;background:var(--sky)"></div><div class="alloc-seg" style="width:${(buffer/tot*100).toFixed(0)}%;background:var(--emerald)"></div><div class="alloc-seg" style="width:${(warChest/tot*100).toFixed(0)}%;background:var(--amber)"></div>`;
    $('alloc-etf').textContent=fmtK(invested);$('alloc-buf').textContent=fmtK(buffer);$('alloc-war').textContent=fmtK(warChest);

    // Health
    let h=50;h+=Math.min(30,(invested/capital)*40);h-=swr>4?(swr-4)*8:0;h+=Math.min(15,bufferYears*5);h-=warchestPct>25?(warchestPct-25)*2:0;h=Math.max(0,Math.min(100,h));
    const hf=$('health-fill'),hl=$('health-label');
    hf.style.width=h+'%';
    if(h>70){hf.style.background='var(--emerald)';hl.textContent=t.robust;hl.style.color='var(--emerald)';}
    else if(h>40){hf.style.background='var(--amber)';hl.textContent=t.moderate;hl.style.color='var(--amber)';}
    else{hf.style.background='var(--rose)';hl.textContent=t.fragile;hl.style.color='var(--rose)';}

    $('stat-swr').textContent=swr.toFixed(1)+' %';

    // Simulate
    const sim=simulate({invested,buffer,warChest,monthlyETF,years,annualGrowth:growth/100,inflation,ahv});

    const totalOut=totalMonthly*12*years;
    const capUsed=Math.max(0,capital-legacy);
    $('stat-total-out').textContent=fmt(totalOut)+' CHF';
    $('stat-capital-used').textContent=fmt(capUsed)+' CHF';
    $('stat-market-gain').textContent=fmt(Math.max(0,totalOut-capUsed))+' CHF';
    const endV=sim.hD[sim.hD.length-1]+sim.hB[sim.hB.length-1]+sim.hW[sim.hW.length-1];
    $('stat-end-value').textContent=fmt(endV)+' CHF';
    $('stat-worst').textContent=fmt(sim.worstDepot)+' CHF';
    $('stat-crises').textContent=sim.crisisCount+' '+t.bearMarkets;
    $('stat-buffer-used').textContent=sim.bufferMonthsUsed+' '+t.monthsUnit;

    // Crisis tags
    const tagsEl=$('crisis-tags');
    tagsEl.innerHTML=sim.hitCrises.map(c=>`<span class="crisis-tag">${c.name} (${c.startYear})</span>`).join('');

    renderChart(sim,legacy);
}

// ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ
Object.values(inputs).forEach(el=>el.addEventListener('input',recalc));
setLang(detectLang());
</script>

</body>
</html>